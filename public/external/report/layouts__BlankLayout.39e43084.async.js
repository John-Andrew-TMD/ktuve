(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"+dd1":function(e,t,a){"use strict";a.r(t);var n=a("mK77"),r=a.n(n),l=(a("8wx/"),a("oOwq")),o=(a("n3Pa"),a("SHRx")),i=(a("2Kaa"),a("aLJi")),s=(a("Ko87"),a("YB5O")),c=(a("EdcA"),a("rKq6")),u=a("43Yg"),d=a.n(u),p=a("/tCh"),m=a.n(p),h=a("scpF"),f=a.n(h),y=a("O/V9"),g=a.n(y),v=a("8aBX"),b=a.n(v),C=(a("zHCM"),a("im+1")),E=a("FQm9"),w=a.n(E),k=a("LneV"),T=(a("KCNJ"),a("rgLj")),S=a("Pru3"),x=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=f()(this,(e=g()(t)).call.apply(e,[this].concat(r))),a.setColumns=function(){var e=function(e,t){return Object(S["c"])(t.name,e)||Object(S["c"])(t.remark,e)},t=a.props.searchText;a.columns=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",align:"left",width:"30%",filteredValue:t,onFilter:e,sorter:function(e,t){return Object(S["a"])(e.name,t.name)},render:function(e){return Object(S["b"])(e,t[0])}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",align:"left",width:"30%",render:function(e){return Object(S["b"])(e,t[0])}},{title:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",dataIndex:"date",key:"date",width:"30%",sorter:function(e,t){return Object(S["a"])(e.date,t.date)},align:"left"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,t){return w.a.createElement("button",{onClick:function(){return a.props.configCallback(t)},className:"link-button"},"\u914d\u7f6e")}}]},a}return b()(t,e),m()(t,[{key:"render",value:function(){this.setColumns();var e=this.props,t=e.dataSource,a=e.loading,n={type:this.props.selectType,onChange:this.props.selectRowChange,selectedRowKeys:this.props.selectedRowKeys};return w.a.createElement(T["a"],{rowKey:"uuId",loading:a,rowSelection:n,columns:this.columns,dataSource:t})}}]),t}(w.a.Component);x.defaultProps={selectType:"checkbox",showActionColumn:!0,searchText:[""],configCallback:function(){},selectRowChange:function(){}};var D=x,O=(a("Nriz"),a("QcoW")),I=(a("Dd0U"),a("k/Tt")),F=a("zAuD"),P=a.n(F),N=(a("mlbU"),a("coPZ")),V=(a("ZS9L"),a("W38+")),q=(a("EH+i"),a("PuNp"),a("sVKK")),L=(a("myUV"),a("swlU")),R=a("cO38"),M=a.n(R),j=a("TGva"),A=(a("j4Te"),V["a"].Item),K=N["a"].Option,B=function(){return[{inputType:"input",configValue:{}}]},U=function(e){function t(e){var a;return d()(this,t),a=f()(this,g()(t).call(this,e)),a.initColumns=function(){var e=Object.entries(j["a"].inputComConfig).map(function(e){var t=M()(e,2),a=t[0],n=t[1];return w.a.createElement(K,{title:n.text,key:a,value:a},n.text)});a.columns=[{title:"\u5b57\u6bb5\u540d\u79f0",width:"20%",dataIndex:"name",render:function(e,t,n){return w.a.createElement(l["a"],{value:e,maxLength:64,onChange:function(e){return a.handleChange(e.target.value,n,"name")}})}},{title:"\u952e\u503c",width:"25%",dataIndex:"keyValue",render:function(e,t,n){return w.a.createElement(l["a"],{value:e,maxLength:64,onChange:function(e){return a.handleChange(e.target.value,n,"keyValue")}})}},{title:w.a.createElement("span",null,"\u5173\u8054\u6570\u636e\u96c6\u5b57\u6bb5",w.a.createElement(L["a"],{title:"\u5728\u529f\u80fd\u64cd\u4f5c\u9636\u6bb5\uff0c\u5982\u679c\u9700\u8981\u5c06\u62a5\u8868\u91cc\u9762\u7528\u5230\u7684\u5b57\u6bb5\u6216\u8005\u67d0\u4e9b\u7cfb\u7edf\u503c\u6216\u8005\u5e38\u91cf\u503c\u4f5c\u4e3a\u521d\u59cb\u5316\u503c\uff0c\u9700\u8981\u586b\u5165\u5f62\u5982${\u6570\u636e\u96c6.\u5b57\u6bb5}\u6216\u8005${report_system_userid}\u6216\u80051\u8fd9\u6837\u7684\u5e38\u91cf"},w.a.createElement(I["a"],{type:"question-circle-o",style:{color:"blue",fontSize:14}}))),width:"25%",dataIndex:"bindField",render:function(e,t,n){return w.a.createElement(l["a"],{value:e,maxLength:64,onChange:function(e){return a.handleChange(e.target.value,n,"bindField")}})}},{title:"\u63a7\u4ef6\u7c7b\u578b",width:"15%",dataIndex:"inputType",render:function(t,n,r){return w.a.createElement(N["a"],{value:t,onChange:function(e){return a.handleChange(e,r,"inputType")}},e)}},{title:"\u64cd\u4f5c",width:"15%",dataIndex:"operation",render:function(e,t,n){return w.a.createElement("span",null,0===n&&w.a.createElement(I["a"],{type:"plus-circle-o",style:{color:"blue",marginRight:8},onClick:a.addParam}),w.a.createElement(I["a"],{type:"minus-circle-o",style:{color:"red"},onClick:function(){return a.minusParam(n)}}))}}],a.props.needValue||a.columns.splice(1,1)},a.handleChange=function(e,t,n){var r=a.state.value,l=r[t];l[n]=e,"inputType"===n&&(l.configValue={}),a.setState({value:r}),a.triggerChange(r)},a.expandRowValueChange=function(e,t,n){var r=a.state.value,l=r[t];l.configValue="object"===typeof l.configValue?l.configValue:{},l.configValue[n]=e,a.setState({value:r}),a.triggerChange(r)},a.addParam=function(){var e=a.state.value,t=B(),n=M()(t,1),r=n[0];e.push(r),a.setState({value:e}),a.triggerChange(e)},a.minusParam=function(e){var t=a.state.value;t.splice(e,1),a.setState({value:t}),a.triggerChange(t)},a.triggerChange=function(e){var t=a.props.onChange;t&&t(e)},a.renderCom=function(e,t){var n=a.state.value[t],r=n.configValue||{},o=e.props||{};switch(e.type){case"input":return w.a.createElement(l["a"],{size:"small",value:r[e.key],onChange:function(n){return a.expandRowValueChange(n.target.value,t,e.key)}});case"inputNumber":return w.a.createElement(q["a"],P()({size:"small",value:r[e.key]},o,{onChange:function(n){return a.expandRowValueChange(n,t,e.key)}}));case"select":var i,s={};if(e.src)switch(e.src.type){case"const":i=Object.entries(j["a"][e.src.key]).map(function(e){var t=M()(e,2),a=t[0];t[1];return w.a.createElement(K,{title:a,key:a,value:a},a)});break;case"set":s={showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.includes(e)}},i=a.props.queryDataSets.map(function(e,t){return w.a.createElement(K,{title:e.name,key:t,value:e.uuId},e.name)});break;case"field":s={showSearch:!0,optionFilterProp:"children",disabled:!r.set,filterOption:function(e,t){return t.props.children.includes(e)}};var c={};a.props.queryDataSets.forEach(function(e){e.uuId===r.set&&(c=e)});var u=JSON.parse(c.param||'{"columns":[]}');i=u.columns.map(function(e,t){return w.a.createElement(K,{title:e,key:t,value:e},e)});break;default:break}return w.a.createElement(N["a"],P()({style:{width:150},size:"small"},s,{allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.includes(e)},value:r[e.key],onChange:function(n){return a.expandRowValueChange(n,t,e.key)}}),i);case"switch":return w.a.createElement(O["a"],{size:"small",checked:r[e.key],onChange:function(n){return a.expandRowValueChange(n,t,e.key)}});default:break}},a.getComponentConfigItems=function(e,t){var n=j["a"].inputComConfig[e].configs;return n.map(function(e,n){return w.a.createElement(A,{label:e.title,key:"".concat(t,"-").concat(n)},a.renderCom(e,t))})},a.state={value:B()},a.initColumns(),a}return b()(t,e),m()(t,[{key:"componentWillReceiveProps",value:function(e){if("value"in e){var t=e.value||B();this.setState({value:t})}}},{key:"render",value:function(){var e=this,t=this.state.value.map(function(e,t){return Object.assign({},e,{key:"".concat(t)})}),a=function(t,a){return w.a.createElement("span",{className:"fieldList-expandRow flex-layout-row"},e.getComponentConfigItems(t.inputType,a))};return w.a.createElement("div",{className:"procedureParamBox"},0===t.length&&w.a.createElement(I["a"],{type:"plus-circle-o",style:{color:"blue",marginRight:8},onClick:this.addParam}),t.length>0&&w.a.createElement(T["a"],{bordered:!0,columns:this.columns,size:"samll",expandedRowRender:a,dataSource:t,pagination:!1}))}}]),t}(E["Component"]);U.defaultProps={size:"default",value:B(),needValue:!0,queryDataSets:[]};a("/afZ");var z=a("bK+b"),H=(a("/ySr"),a("F0ZO")),W=(a("Hvxc"),a("Ft10")),_=(a("qDyL"),a("nwUc")),J=(a("jTJM"),a("KmIe")),Q=a("Ico4"),Y=a.n(Q),G=a("UWy3"),Z=a.n(G),$=(a("dyrF"),a("kzyc")),X=(a("kxEW"),a("fjK7")),ee=a("dWPD"),te=a("TOTH"),ae=a("R/np"),ne=a("q66v"),re=function(e){var t="",a=j["a"].DBDataTypes.sqlserver;return Object.keys(a).forEach(function(n){e==a[n]&&(t=n)}),t},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=function(e,t){return Object(S["c"])(t.name,e)},n=function(e){return re(e)};return"procedure"===e?[{dataIndex:"name",title:"\u540d\u79f0",width:"20%",filteredValue:[t],onFilter:a,sorter:function(e,t){return Object(S["a"])(e.name,t.name)},render:function(e){return Object(S["b"])(e,t)}},{dataIndex:"type",width:"15%",title:"\u6267\u884c\u7c7b\u578b"},{dataIndex:"valueType",width:"20%",fontSize:12,title:"\u503c\u7c7b\u578b",render:function(e){return n(e)}},{dataIndex:"value",width:"25%",title:"\u503c"},{dataIndex:"testValue",width:"20%",title:"\u6d4b\u8bd5\u503c"}]:"sql"===e?[{dataIndex:"name",width:"50%",title:"\u540d\u79f0",filteredValue:[t],onFilter:a,sorter:function(e,t){return Object(S["a"])(e.name,t.name)},render:function(e){return Object(S["b"])(e,t)}},{dataIndex:"testValue",width:"50%",title:"\u53c2\u6570\u6d4b\u8bd5\u503c"}]:"msg"===e?[{dataIndex:"name",title:"\u540d\u79f0",width:"30%",filteredValue:[t],onFilter:a,sorter:function(e,t){return Object(S["a"])(e.name,t.name)},render:function(e){return Object(S["b"])(e,t)}},{dataIndex:"value",width:"30%",title:"\u503c"},{dataIndex:"testValue",width:"30%",title:"\u53c2\u6570\u6d4b\u8bd5\u503c"}]:void 0},oe=function(e,t){return w.a.createElement("span",null,w.a.createElement("span",null,"\u529f\u80fd\u96c6\u53c2\u6570"),w.a.createElement(l["a"].Search,{style:{position:"absolute",right:24,width:"15vw"},placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22",onSearch:ie.bind(null,e,t)}))},ie=function(e,t,a){e(le(t,a))},se=function(e){var t=e.param,a=e.className,n=e.children,r=Object(E["useState"])([]),l=M()(r,2),o=l[0],i=l[1],s=Object(E["useState"])([]),c=M()(s,2),u=c[0],d=c[1];Object(E["useEffect"])(function(){var e=t.content;e&&("sql"===t.type&&i(e.sqlParams),"procedure"===t.type&&i(e.procedureParams),"msg"===t.type&&i(e.customParam),d(le(t.type)))},[t]);var p={defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,t){return"\u5171".concat(e,"\u6761")}};return w.a.createElement(H["a"],{className:a,bodyStyle:{padding:2},title:oe(d,t.type)},w.a.createElement(T["a"],{bordered:!0,scroll:{y:"60vh"},dataSource:o,columns:u,pagination:p,size:"small"}),n)};se.defaultProps={param:"{}"};var ce=se,ue=a("ORyx"),de=a.n(ue),pe=V["a"].Item,me=C["a"].Sider,he=(C["a"].Header,C["a"].Content),fe=X["a"].Panel,ye=N["a"].Option,ge=$["a"].Group,ve=function(e,t,a,n,r,l){l.stopPropagation(),e(!0),sessionStorage.removeItem("function_template_fields"),sessionStorage.setItem("function_template_fields",JSON.stringify(t)),Fe(t,a,n),De(t,a,r),setTimeout(function(){return Ze(t,a,n)},0)},be=function(e,t,a,n,r){var l=!1;a.validateFieldsAndScroll(function(e){e||(l=!0)}),Ce(a)?l&&(e(!1),ke(t,a,n,r)):c["a"].error("\u8bf7\u68c0\u67e5\u81ea\u5b9a\u4e49\u6570\u636e")},Ce=function(e){var t=!0,a=e.getFieldsValue,n=a();return n.hasOwnProperty("defValue")&&n.defValue&&n.defValue.some(function(e){return""===e.key||""===e.value||e.key.length>256||e.value.length>256})&&(t=!1),t},Ee=function(e,t){e(!1);var a=sessionStorage.getItem("function_template_fields");t({param:JSON.parse(a)})},we=function(){var e=Z()(Y.a.mark(function e(t,a,n,r,l,o,i){var s,u;return Y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=i.selectedKeys,u=!1,n.validateFieldsAndScroll(function(e){e||(u=!0)}),Ce(n)){e.next=6;break}return c["a"].error("\u8bf7\u68c0\u67e5\u81ea\u5b9a\u4e49\u6570\u636e"),e.abrupt("return");case 6:if(u){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,ke(a,n,r,l);case 10:return e.next=12,t(s);case 12:return e.next=14,n.resetFields();case 14:return setTimeout(function(){Fe(a,s,n)},0),e.next=17,Fe(a,s,n);case 17:De(a,s,o);case 18:case"end":return e.stop()}},e)}));return function(t,a,n,r,l,o,i){return e.apply(this,arguments)}}(),ke=function(e,t,a,n){var r=t.getFieldsValue,l=r();e.forEach(function(e,t){a[0]==t&&Object.keys(l).forEach(function(t){Te.config.includes(t)&&(e.hasOwnProperty("configValue")&&"object"===typeof e.configValue?e.configValue[t]=l[t]:(e.configValue={},e.configValue[t]=l[t])),Te.default.includes(t)&&(e[t]=l[t])})}),n(e)},Te={default:["inputType","name","keyValue","bindField","bindValue"],config:["set","required","field","searchField","separator","searchFiledHidden","placeholder","maxLength","pattern","disabled","precision","unit","width","color","align","all","defValue","format"]},Se=function(){var e=Z()(Y.a.mark(function e(t,a,n,r,l,o){var i,s;return Y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.length+1,s=!1,l.validateFieldsAndScroll(function(e){e||(s=!0)}),s){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,ke(t,l,r,a);case 7:return t.push({name:"\u5b57\u6bb5".concat(i),keyValue:"key".concat(i),inputType:"input",configValue:{}}),a(t),e.next=11,n(["".concat(i-1)]);case 11:return e.next=13,l.resetFields();case 13:return e.next=15,Fe(t,["".concat(i-1)],l);case 15:return e.next=17,o(!0);case 17:case"end":return e.stop()}},e)}));return function(t,a,n,r,l,o){return e.apply(this,arguments)}}(),xe=function(){var e=Z()(Y.a.mark(function e(t,a,n,r,l,o){var i,s,c;return Y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o.stopPropagation(),0!==t.length){e.next=3;break}return e.abrupt("return");case 3:return i=t[0],s=a.filter(function(e,t){return t!=i}),c=[],r(s),s.length>0&&c.push("0"),n(c),setTimeout(function(){Fe(s,c,l)},0),e.next=12,Fe(s,c,l);case 12:case"end":return e.stop()}},e)}));return function(t,a,n,r,l,o){return e.apply(this,arguments)}}(),De=function(e,t,a){if(e.length>0){var n=e[t[0]].configValue.defValue;a(!n)}},Oe=function(){return Object.entries(j["a"].inputComConfig).map(function(e){var t=M()(e,2),a=t[0],n=t[1];return w.a.createElement(ye,{title:n.text,key:a,value:a},n.text)})},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tempDateFormatTypes";return Object.entries(j["a"][e]).map(function(e){var t=M()(e,1),a=t[0];return w.a.createElement(ye,{title:a,key:a,value:a},a)})},Fe=function(e,t,a){var n=a.setFieldsValue,r={};if(0!==e.length){var l=e[t[0]];Object.keys(l).forEach(function(e){"configValue"===e?Object.keys(l[e]).forEach(function(t){return r[t]=l[e][t]}):r[e]=l[e]}),n(r)}},Pe=function(e,t,a){var n="";return e.forEach(function(e){e.uuId==a&&(n=e.name)}),n},Ne=function(e,t){t.length>0?e.setFieldsValue({set:t[0].uuId}):e.setFieldsValue({set:null})},Ve=function(e,t,a,n,r,l){var o=l.target.value||null,i=a[n];if("a"===o)return e(!0),i.hasOwnProperty("configValue")&&i.configValue.hasOwnProperty("defValue")&&(delete i.configValue.defValue,r(a)),void t.setFieldsValue({defValue:null});e(!1),i.hasOwnProperty("configValue")&&i.configValue.hasOwnProperty("set")&&(delete i.configValue.set,i.configValue.hasOwnProperty("field")&&delete i.configValue.field,i.configValue.hasOwnProperty("searchField")&&delete i.configValue.searchField,r(a))},qe=function(e,t){var a=e.getFieldValue("set"),n={};t.forEach(function(e){e.uuId===a&&(n=e)});var r=JSON.parse(n.param||'{"columnsDetail":[]}');if(r.columns)return r.columns;if(r.columnsDetail){var l=[],o=de.a.cloneDeep(r.columnsDetail);return o.length>0&&(l=o.map(function(e){return e.name})),l}return[]},Le=function(e){return e},Re=function(e,t){t.length>0?(e.setFieldsValue({field:t.map(function(e){return e.name})}),t.length>=1&&e.setFieldsValue({searchField:t[0].name})):e.setFieldsValue({field:null})},Me={labelCol:{xs:{span:24},sm:{span:9},md:{span:7},lg:{span:5},xl:{span:4}},wrapperCol:{xs:{span:24},sm:{span:15},md:{span:17},lg:{span:19},xl:{span:20}}},je={labelCol:{xs:{span:12},sm:{span:9},md:{span:7},lg:{span:10},xl:{span:8}},wrapperCol:{xs:{span:12},sm:{span:15},md:{span:14},lg:{span:14},xl:{span:16}}},Ae={labelCol:{xs:{span:12},sm:{span:9},md:{span:7},xl:{span:8}},wrapperCol:{xs:{span:12},sm:{span:8},md:{span:8},xl:{span:8}}},Ke={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},Be={labelCol:{xs:{span:12},sm:{span:8}},wrapperCol:{xs:{span:12},sm:{span:16}}},Ue={labelCol:{xs:{span:12},sm:{span:8}},wrapperCol:{xs:{span:12},sm:{span:8}}},ze=function(e){return e?Me:Ke},He=function(e){return e?je:Be},We=function(e){return e?Ae:Ue},_e=function(e){var t=e.getFieldValue("field")||[];return"object"===typeof t?t.map(function(e,t){return w.a.createElement(ye,{key:t,value:e},e)}):[w.a.createElement(ye,{key:0,value:t},t)]},Je=function(e){return e?"func-field-modal-right-into":"func-field-modal-right"},Qe=function(e,t,a){e(!0);var n="5vw";t({marginLeft:n,top:10}),a("50vw")},Ye=function(e,t,a){e(!1),t({top:10}),a("700px")},Ge=function(e,t,a,n){},Ze=function(e,t,a){var n=a.setFieldsValue,r={};if(0!==e.length){var l=e[t[0]];Object.keys(l).forEach(function(e){"configValue"===e?Object.keys(l[e]).forEach(function(t){return r[t]=l[e][t]}):r[e]=l[e]}),n({set:r.set,field:r.field,searchField:r.searchField,searchFiledHidden:r.searchFiledHidden,defValue:r.defValue})}},$e=function(e){var t=e.key,a=e.value,n=e.dataSets,r=e.form,i=e.onChange,c=e.dataSetsParam,u=e.fatherSetFieldsValue,d=r.getFieldDecorator,p=Object(E["useState"])(!1),m=M()(p,2),h=m[0],f=m[1],y=Object(E["useState"])([]),g=M()(y,2),v=g[0],b=g[1],k=Object(E["useState"])(),T=M()(k,2),S=T[0],x=T[1],D=Object(E["useState"])(!0),F=M()(D,2),R=F[0],j=F[1],A=Object(E["useState"])(!1),K=M()(A,2),B=K[0],U=K[1],Q=Object(E["useState"])({top:10}),Y=M()(Q,2),G=Y[0],Z=Y[1],$=Object(E["useState"])("700px"),re=M()($,2),le=re[0],oe=re[1],ie=v.length+1,se=r.getFieldValue("inputType");return Object(E["useEffect"])(function(){x(["0"]),b(a),Fe(a,["0"],r)},[a]),w.a.createElement(E["Fragment"],{key:t},w.a.createElement(s["a"],{type:"primary",ghost:!0,onClick:ve.bind(null,f,a,S,r,j)},w.a.createElement(I["a"],{type:"edit"}),"\u70b9\u51fb\u7f16\u8f91"),w.a.createElement(o["a"],{style:G,bodyStyle:{padding:0},title:"\u5b57\u6bb5\u7f16\u8f91",maskClosable:!1,keyboard:!1,visible:h,okText:"\u786e\u5b9a",width:le,cancelText:"\u5173\u95ed",onOk:be.bind(null,f,v,r,S,i),onCancel:Ee.bind(null,f,u)},w.a.createElement(C["a"],{style:{background:"#fff"}},w.a.createElement(me,{width:B?"11vw":"200px",style:{background:"#fff",borderRight:"1px solid lightgrey"}},w.a.createElement(_["a"],{type:"flex",align:"middle",justify:"center",className:"func-field-modal-tools"},w.a.createElement(s["a"],{shape:"circle",icon:"plus",size:"small",title:"\u65b0\u589e",type:"primary",style:{width:20,height:20,fontSize:12},ghost:!0,onClick:Se.bind(null,v,i,x,S,r,j)}),w.a.createElement(J["a"],{title:"\u662f\u5426\u5220\u9664\u9009\u4e2d\u67e5\u8be2\u6761\u4ef6",onConfirm:xe.bind(null,S,v,x,b,r),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},w.a.createElement(s["a"],{type:"danger",ghost:!0,shape:"circle",icon:"delete",size:"small",style:{marginLeft:"20px",color:"red",width:20,height:20,fontSize:12},title:"\u5220\u9664"}))),w.a.createElement(ae["a"],{dataSource:v,selectedKeys:S,onSelect:we.bind(null,x,v,r,S,i,j)})),w.a.createElement(he,{style:{padding:0,overflow:"auto",maxHeight:"80vh"}},v.length>0&&w.a.createElement(V["a"],null,w.a.createElement(H["a"],{bodyStyle:{padding:2},bordered:!1},w.a.createElement(X["a"],{className:"func-field-modal-collapse",defaultActiveKey:["panel_1","panel_2","panel_3","panel_4","panel_5"]},w.a.createElement(fe,{key:"panel_1",header:"\u63a7\u4ef6\u57fa\u672c\u4fe1\u606f",disabled:!0,style:{padding:0}},w.a.createElement(pe,P()({label:"\u63a7\u4ef6\u6807\u9898"},ze(B),{style:{margin:0}}),d("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0"}],initialValue:"\u5b57\u6bb5".concat(ie),onChange:Ge.bind(null,v,b,S)})(w.a.createElement(l["a"],null))),w.a.createElement(pe,P()({label:"\u63a7\u4ef6ID"},ze(B),{style:{margin:0}}),d("keyValue",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u952e\u503c"}],initialValue:"key".concat(ie)})(w.a.createElement(l["a"],null)))),w.a.createElement(fe,{key:"panel_5",header:"\u63a7\u4ef6\u7c7b\u578b"},w.a.createElement(pe,P()({label:"\u63a7\u4ef6\u7c7b\u578b"},ze(B),{style:{margin:0}}),d("inputType",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u63a7\u4ef6\u7c7b\u578b"}],initialValue:"input"})(w.a.createElement(N["a"],null,Oe.call(null))))),w.a.createElement(fe,{key:"panel_2",header:"\u63a7\u4ef6\u6570\u636e",style:"inputArea"===se||"check"===se?{display:"none"}:{}},("select"==se||"selectMulti"==se||"selectMultiList"==se||"selectMultiSingle"==se||"radio"==se)&&w.a.createElement(w.a.Fragment,null,w.a.createElement(ge,{defaultValue:R?"a":"b",onChange:Ve.bind(null,j,r,v,S,i),value:R?"a":"b",options:[{label:"\u6570\u636e\u96c6",value:"a"},{label:"\u81ea\u5b9a\u4e49\u6570\u636e",value:"b"}],style:{display:"flex",marginLeft:"20.67%",marginTop:5,marginBottom:6}}),"radio"!==se||"selectMulti"!==se||"selectMultiList"!==se||"selectMultiSingle"!==se&&w.a.createElement(pe,P()({label:'\u5305\u542b"\u5168\u90e8"'},ze(B),{style:{margin:0}}),d("all",{valuePropName:"checked"})(w.a.createElement(O["a"],{checkedChildren:"\u662f",unCheckedChildren:"\u5426"}))),R&&w.a.createElement(_["a"],null,w.a.createElement(W["a"],{span:24},w.a.createElement(pe,P()({label:"\u6570\u636e\u96c6"},ze(B),{style:{margin:0}}),d("set",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6570\u636e\u96c6"}]})(w.a.createElement(ne["a"],{title:"\u6570\u636e\u96c6",keyField:"uuId",key:"input_modal_1",normalizeValue:Pe.bind(null,n,r),columnType:"simpleDataSet",modalWidth:"50vw",handleOk:Ne.bind(null,r),dataSets:n})))),w.a.createElement(W["a"],{span:24},w.a.createElement(pe,P()({label:"\u5b57\u6bb5"},ze(B),{style:{margin:0}}),d("field",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b57\u6bb5"}]})(w.a.createElement(ne["a"],{title:"\u6570\u636e\u5b57\u6bb5",keyField:"name",key:"input_modal_2",type:"checkbox",normalizeValue:Le,columnType:"simpleDataFields",modalWidth:"50vw",handleOk:Re.bind(null,r),dataSets:qe(r,n)})))),"radio"!==se&&w.a.createElement(W["a"],{span:24},w.a.createElement(pe,P()({label:w.a.createElement("span",{title:"\u67e5\u8be2\u65f6\u7684\u6709\u6548\u5b57\u6bb5"},"\u6709\u6548\u5b57\u6bb5")},ze(B),{style:{margin:0}}),d("searchField")(w.a.createElement(N["a"],null,_e(r))))),"radio"!==se&&w.a.createElement(W["a"],{span:24},w.a.createElement(pe,P()({label:w.a.createElement("span",null,"\u9690\u85cf",w.a.createElement(L["a"],{title:"\u662f\u5426\u9690\u85cf\u6709\u6548\u5b57\u6bb5"},w.a.createElement(I["a"],{type:"question-circle-o",style:{color:"blue",fontSize:14}})))},ze(B),{style:{margin:0}}),d("searchFiledHidden",{valuePropName:"checked"})(w.a.createElement(O["a"],{checkedChildren:"\u662f",unCheckedChildren:"\u5426"})))),"selectMulti"==se||"selectMultiList"==se||"selectMultiSingle"==se&&w.a.createElement(W["a"],{span:24},w.a.createElement(pe,P()({label:"\u5206\u9694\u7b26"},ze(B),{style:{margin:0}}),d("separator")(w.a.createElement(l["a"],{maxLength:1}))))),!R&&w.a.createElement(w.a.Fragment,null,w.a.createElement(pe,P()({label:"\u81ea\u5b9a\u4e49"},ze(B)),d("defValue",{rules:[{required:!0,message:"\u8bf7\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u503c"}]})(w.a.createElement(te["a"],null))))),w.a.createElement(_["a"],null,se&&["input","inputNumber","inputUnit","inputNumberUnit","inputDol"].includes(se)&&w.a.createElement(W["a"],{md:B?24:12,lg:12},w.a.createElement(pe,P()({label:"\u5355\u4f4d"},He(B),{style:{margin:0}}),d("unit")(w.a.createElement(l["a"],{maxLength:10,placeholder:"\u8bf7\u8f93\u5165\u5355\u4f4d"})))),se&&["inputNumber","inputNumberUnit","inputDol"].includes(se)&&w.a.createElement(W["a"],{md:B?24:12,lg:12},w.a.createElement(pe,P()({label:"\u7cbe\u5ea6"},He(B),{style:{margin:0}}),d("precision",{initialValue:2})(w.a.createElement(q["a"],{style:{width:"100%"},min:0,precision:0,placeholder:"\u8bf7\u8f93\u5165\u7cbe\u5ea6"}))))),se&&se.includes("date")&&w.a.createElement(pe,P()({label:"\u65e5\u671f\u683c\u5f0f"},ze(B),{style:{margin:0}}),d("format")(w.a.createElement(N["a"],null,Ie("tempDateFormatTypes"))))),w.a.createElement(fe,{key:"panel_3",header:"\u63a7\u4ef6\u884c\u4e3a"},w.a.createElement(_["a"],null,w.a.createElement(W["a"],{md:B?24:12,lg:12},w.a.createElement(pe,P()({label:"\u662f\u5426\u5fc5\u586b"},He(B),{style:{margin:0}}),d("required",{valuePropName:"checked"})(w.a.createElement(O["a"],{checkedChildren:"\u662f",unCheckedChildren:"\u5426"})))),w.a.createElement(W["a"],{md:B?24:12,lg:12},w.a.createElement(pe,P()({label:"\u662f\u5426\u53ea\u8bfb"},He(B),{style:{margin:0}}),d("disabled",{valuePropName:"checked"})(w.a.createElement(O["a"],{checkedChildren:"\u662f",unCheckedChildren:"\u5426"})))),se&&["input","inputUnit","inputArea"].includes(se)&&w.a.createElement(W["a"],{md:B?24:12,lg:12},w.a.createElement(pe,P()({label:"\u6700\u5927\u957f\u5ea6"},He(B),{style:{margin:0}}),d("maxLength",{initialValue:a[S[0]].configValue.maxLength||500})(w.a.createElement(q["a"],{precision:0,min:0,style:{width:"100%"}})))),w.a.createElement(W["a"],{md:B?24:12,lg:12},["inputArea","input","inputString","inputUnit"].includes(se)&&w.a.createElement(pe,P()({label:"\u5bf9\u9f50\u65b9\u5f0f"},He(B),{style:{margin:0}}),d("align",{rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u8865\u9f50\u5b57\u7b26"}],initialValue:a[S[0]].configValue.align||"right"})(w.a.createElement(N["a"],null,w.a.createElement(ye,{key:"right",value:"right"},"\u53f3"),w.a.createElement(ye,{key:"left",value:"left"},"\u5de6"))))))),w.a.createElement(fe,{key:"panel_4",header:"\u63a7\u4ef6\u663e\u793a"},"check"!==se&&w.a.createElement(pe,P()({label:"\u521d\u59cb\u503c"},ze(B),{style:{margin:0}}),d("bindValue")(w.a.createElement(l["a"],null))),"check"!==se&&w.a.createElement(pe,P()({label:w.a.createElement("span",null,"\u5173\u8054\u5b57\u6bb5",w.a.createElement(L["a"],{title:"\u5728\u529f\u80fd\u64cd\u4f5c\u9636\u6bb5\uff0c\u5982\u679c\u9700\u8981\u5c06\u62a5\u8868\u91cc\u9762\u7528\u5230\u7684\u5b57\u6bb5\u6216\u8005\u67d0\u4e9b\u7cfb\u7edf\u503c\u6216\u8005\u5e38\u91cf\u503c\u4f5c\u4e3a\u521d\u59cb\u5316\u503c\uff0c\u9700\u8981\u586b\u5165\u5f62\u5982${\u6570\u636e\u96c6.\u5b57\u6bb5}\u6216\u8005${report_system_userid}\u6216\u80051\u8fd9\u6837\u7684\u5e38\u91cf"},w.a.createElement(I["a"],{type:"question-circle-o",style:{color:"blue",fontSize:14}})))},ze(B),{style:{margin:0}}),d("bindField",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5173\u8054\u5b57\u6bb5"}]})(w.a.createElement(l["a"],null))),"check"!==se&&w.a.createElement(pe,P()({label:"\u7f6e\u7a7a\u63d0\u793a"},ze(B),{style:{margin:0}}),d("placeholder",{})(w.a.createElement(l["a"],null))),se&&["input","inputUnit","inputArea"].includes(se)&&w.a.createElement(pe,P()({label:"\u6b63\u5219"},ze(B)),d("pattern",{initialValue:a[S[0]].configValue.pattern})(w.a.createElement(N["a"],{allowClear:!0},Ie("regExps")))),w.a.createElement(_["a"],null,"check"!==se&&w.a.createElement(W["a"],{md:B?24:12,lg:12,key:"col1"},w.a.createElement(pe,P()({label:w.a.createElement("span",null,"\u5bbd\u5ea6",w.a.createElement(L["a"],{title:"\u63d0\u793a\uff1a\u5efa\u8bae\u5728150-300\u4e4b\u95f4"},w.a.createElement(I["a"],{type:"question-circle-o",style:{color:"blue",fontSize:14}})))},He(B),{style:{margin:0}}),d("width",{rules:[{required:!1,message:""}],initialValue:100})(w.a.createElement(q["a"],{max:1e3,min:0,precision:0,style:{width:"100%"}})))),w.a.createElement(W["a"],{md:B?24:12,lg:12,key:"col2"},w.a.createElement(ee["a"],P()({},e,We(B),{label:"\u989c\u8272",style:{margin:0},defaultValue:a[S[0]].configValue.color})))))))),0===v.length&&w.a.createElement(z["a"],{style:{margin:5},message:"\u65e0\u5df2\u521b\u5efa\u529f\u80fd\u6a21\u677f\u5b57\u6bb5\uff0c\u8bf7\u65b0\u589e\uff01",type:"warning"}))),w.a.createElement(I["a"],{className:"func-field-modal-slider",type:"vertical-left",onClick:Qe.bind(null,U,Z,oe)}),w.a.createElement(ce,{param:JSON.parse(c),className:Je(B)},w.a.createElement(I["a"],{className:"func-field-modal-slider-hide",type:"vertical-right",onClick:Ye.bind(null,U,Z,oe)}))))};$e.defaultProps={key:"key0",value:[],dataSets:[]};var Xe=V["a"].create()($e),et=a("Tfcp"),tt=a.n(et),at=(a("9Y/d"),a("bgyY")),nt=a("SgMh"),rt=a.n(nt),lt=a("3th7"),ot=C["a"].Sider,it=V["a"].Item,st=N["a"].Option,ct=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=f()(this,(e=g()(t)).call.apply(e,[this].concat(r))),a.getFieldsList=function(){var e=a.props.fieldList;return e?e.map(function(e,t){return w.a.createElement(st,{key:t,value:e.keyValue},e.name)}):[]},a.handInputChange=function(e,t){e&&Array.isArray(e)?e.forEach(function(e){a.props.handleChange(e,t.target?t.target.value:t)}):a.props.handleChange(e,t.target?t.target.value:t)},a.handleSelectChange=function(e,t){a.props.handleChange(e,t)},a}return b()(t,e),m()(t,[{key:"handleFieldChange",value:function(){var e=Z()(Y.a.mark(function e(t,a){var n,r,l;return Y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.props.fieldList,r=n,!(r&&r.length>0)){e.next=12;break}return l=de.a.find(r,function(e){return e.keyValue===a}),e.next=6,this.props.handleChange(t,a);case 6:return e.next=8,this.props.handleChange("inputType",l.inputType||"input");case 8:return e.next=10,this.props.handleChange("title",l?l.name:"\u672a\u547d\u540d");case 10:e.next=13;break;case 12:this.props.handleChange(t,a);case 13:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this.props.nodeData,t=e.uiType,a=e.title,n=e.labelCol,r=e.wrapperCol,o=e.colnumber,i=e.field,s={labelCol:{xs:{span:24},md:{span:24},lg:{span:9}},wrapperCol:{xs:{span:24},md:{span:24},lg:{span:14}}},c="<<\u5c5e\u6027\u8c03\u6574>>";return w.a.createElement(ot,{theme:"light",className:"func-sider-container-right",width:"18%"},w.a.createElement("div",{className:"func-sider-title-right"},c),w.a.createElement(V["a"],s,t&&w.a.createElement(it,{label:"\u540d\u79f0",style:{margin:0}},w.a.createElement(l["a"],{size:"small",value:a,placeholder:"",maxLength:"64",onChange:this.handInputChange.bind(this,"title")})),("form"===t||"col"===t)&&w.a.createElement("div",null,w.a.createElement(it,{label:"\u5e03\u5c40",style:{margin:0}},w.a.createElement(N["a"],{size:"small",value:o,onChange:this.handleSelectChange.bind(this,"colnumber")},w.a.createElement(st,{key:1,value:1},"\u4e00\u884c\u4e00\u5217"),w.a.createElement(st,{key:2,value:2},"\u4e00\u884c\u4e24\u5217"),w.a.createElement(st,{key:3,value:3},"\u4e00\u884c\u4e09\u5217"),w.a.createElement(st,{key:4,value:4},"\u4e00\u884c\u56db\u5217")))),"form"===t&&w.a.createElement(w.a.Fragment,null,w.a.createElement(it,{label:"\u6807\u7b7e\u5bbd\u5ea6",style:{margin:0}},w.a.createElement(q["a"],{size:"small",value:n,defaultValue:8,max:24,min:0,precision:0,onChange:this.handInputChange.bind(this,"labelCol"),style:{width:"100%"}})),w.a.createElement(it,{label:"\u5185\u5bb9\u5bbd\u5ea6",style:{margin:0}},w.a.createElement(q["a"],{size:"small",value:r,defaultValue:12,max:24,min:0,precision:0,onChange:this.handInputChange.bind(this,"wrapperCol"),style:{width:"100%"}}))),"field"===t&&w.a.createElement(it,{label:"\u6570\u636e\u5217"},w.a.createElement(N["a"],{size:"small",value:i,placeholder:"\u8bf7\u9009\u62e9",onChange:this.handleFieldChange.bind(this,"field")},this.getFieldsList()))))}}]),t}(E["Component"]),ut=V["a"].create()(ct),dt=a("U1Y/"),pt=C["a"].Header,mt=C["a"].Content,ht=(C["a"].Footer,C["a"].Sider),ft=at["a"].TreeNode,yt=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=f()(this,(e=g()(t)).call.apply(e,[this].concat(r))),a.getTreeDataFromProps=function(){var e=a.props.layout;return e?JSON.parse(e):[]},a.state={disabledTabsBtn:!0,disabledTabBtn:!0,disabledGroupBtn:!0,disabledColBtn:!0,disabledForm:!0,disabledField:!0,selectedKey:null,treeData:a.getTreeDataFromProps(),selectUiType:"",nodeData:{uiType:""},preview:!1},a.getRandomKey=function(e){var t=new Date;return"".concat(e,"_").concat(t.getMinutes()).concat(t.getSeconds()).concat(t.getMilliseconds())},a.handleSideChange=function(e,t,n){var r=a.state,l=r.selectedKey,o=r.treeData;lt["a"].loopAll(o,function(a,n,r,o){o===l&&(a[e]=t)}),a.setState({treeData:o},n)},a.handleSelect=function(e){if(0===e.length)a.setState({disabledTabsBtn:!0,disabledTabBtn:!0,disabledGroupBtn:!0,disabledForm:!0,disabledField:!0});else{var t=e[0];if(a.setState({selectedKey:t}),a.setState({nodeData:[]},function(){lt["a"].loopAll(a.state.treeData,function(e,n,r,l){t===l&&a.setState({nodeData:e})})}),"root"===t)if(a.state.treeData.length>0){var n=a.state.treeData[0];"tabs"===n.uiType?a.setState({disabledTabsBtn:!0,disabledGroupBtn:!0,disabledTabBtn:!0,disabledField:!0,disabledForm:!0,disabledColBtn:!0,selectUiType:"root"}):a.setState({disabledTabsBtn:!0,disabledGroupBtn:!1,disabledColBtn:!1,disabledTabBtn:!0,disabledField:!0,disabledForm:!0,selectUiType:"root"})}else a.setState({disabledTabsBtn:!1,disabledGroupBtn:!1,disabledColBtn:!1,disabledTabBtn:!0,disabledForm:!0,disabledField:!0,selectUiType:"root"});else t.includes("tabs")?a.setState({disabledTabsBtn:!0,disabledTabBtn:!1,disabledColBtn:!0,disabledGroupBtn:!0,disabledForm:!0,disabledField:!0,selectUiType:"tabs"}):t.includes("tabChild")?a.setState({disabledTabsBtn:!0,disabledTabBtn:!0,disabledGroupBtn:!1,disabledColBtn:!1,disabledForm:!0,disabledField:!0,selectUiType:"tabChild"}):t.includes("group")?a.setState({disabledTabsBtn:!0,disabledTabBtn:!0,disabledGroupBtn:!0,disabledColBtn:!0,disabledForm:!1,disabledField:!0,selectUiType:"group"}):t.includes("col")?a.setState({disabledTabsBtn:!0,disabledTabBtn:!0,disabledColBtn:!0,disabledGroupBtn:!1,disabledForm:!0,disabledField:!0,selectUiType:"col"}):t.includes("form")?a.setState({disabledTabsBtn:!0,disabledTabBtn:!0,disabledGroupBtn:!0,disabledColBtn:!0,disabledForm:!0,disabledField:!1,selectUiType:"form"}):t.includes("field")&&a.setState({disabledTabsBtn:!0,disabledTabBtn:!0,disabledGroupBtn:!0,disabledColBtn:!0,disabledForm:!0,disabledField:!0,selectUiType:"field"})}},a.renderTreeNodes=function(e){return e.map(function(e){var t=e.key,n=a.state.selectedKey;return e.children?w.a.createElement(ft,{title:w.a.createElement("span",{className:"func-node-title",title:e.title},t===n&&w.a.createElement(I["a"],{onClick:a.handleDel.bind(tt()(a),t),className:"func-tree-del",type:"delete"}),w.a.createElement("p",{className:"func-node-title-dot"},e.title||"\u672a\u586b\u5199")),key:e.key,dataRef:e},a.renderTreeNodes(e.children)):w.a.createElement(ft,P()({},e,{title:w.a.createElement("span",{className:"func-node-title",title:e.title},t===n&&w.a.createElement(I["a"],{onClick:a.handleDel.bind(tt()(a),t),className:"func-tree-del",theme:"filled",type:"delete"}),w.a.createElement("p",{className:"func-node-title-dot"},e.title||"\u672a\u586b\u5199")),dataRef:e}))})},a.handleDel=function(e,t){t.stopPropagation();var n=a.state.treeData,r=lt["a"].removeWithPropName(n,"key",e);a.setState({tree:r})},a.addTabs=function(e){e.stopPropagation();var t=a.state.treeData,n=a.getRandomKey("tabs"),r="\u6807\u7b7e\u9875";t.push({key:n,title:r,uiType:"tabs",children:[]}),a.setState({treeData:t})},a.addTabChild=function(e){e.stopPropagation();var t=a.state,n=t.treeData,r=t.selectedKey,l=a.getRandomKey("tabChild"),o="tabChild",i="\u5b50\u9875\u7b7e",s="\u5b50\u9875\u7b7e";lt["a"].loopAll(n,function(e,t,a,n){r===n&&e.children.push({key:l,tab:s,title:i,uiType:o,children:[]})}),a.setState({treeData:n})},a.addCol=function(e){e.stopPropagation();var t=a.state,n=t.treeData,r=t.selectedKey,l=a.getRandomKey("col"),o="\u5206\u5217\u5bb9\u5668",i="col",s=2;"root"===r?n.push({key:l,title:o,uiType:i,colnumber:s,children:[]}):lt["a"].loopAll(n,function(e,t,a,n){r===n&&e.children.push({key:l,title:o,uiType:i,colnumber:s,children:[]})}),a.setState({treeData:n})},a.addField=function(e){e.stopPropagation();var t=a.state,n=t.treeData,r=t.selectedKey,l=a.getRandomKey("field"),o="\u5b57\u6bb5",i="field",s=l;lt["a"].loopAll(n,function(e,t,a,n){r===n&&e.children.push({key:l,title:o,uiType:i,field:s})}),a.setState({treeData:n})},a.addGroup=function(e){e.stopPropagation();var t=a.state,n=t.treeData,r=t.selectedKey,l=a.getRandomKey("group"),o="\u5206\u7ec4\u5bb9\u5668",i="group",s=!0,c=a.getRandomKey("form"),u="\u8868\u5355",d="form",p=8,m=16,h=2;"root"===r?n.push({key:l,title:o,uiType:i,checked:s,children:[{key:c,title:u,uiType:d,labelCol:p,wrapperCol:m,colnumber:h,children:[]}]}):lt["a"].loopAll(n,function(e,t,a,n){r===n&&e.children.push({key:l,title:o,uiType:i,checked:s,children:[{key:c,title:u,uiType:d,labelCol:p,wrapperCol:m,colnumber:h,children:[]}]})}),a.setState({treeData:n})},a.addFrom=function(e){e.stopPropagation();var t=a.state,n=t.treeData,r=t.selectedKey,l=a.getRandomKey("form"),o="\u8868\u5355",i="form",s=8,u=16,d=2;lt["a"].loopAll(n,function(e,t,a,n){if(r===n){if(e.children.length>0)return void c["a"].info("\u5f53\u524d\u5206\u7ec4\u5185\u53ea\u5141\u8bb8\u65b0\u589e\u4e00\u4e2a\u8868\u5355");e.children.push({key:l,title:o,uiType:i,labelCol:s,wrapperCol:u,colnumber:d,children:[]})}}),a.setState({treeData:n})},a.filterValue=function(e,t){!t.unit&&e.hasOwnProperty("unit")&&delete e.unit,!t.placeholder&&e.hasOwnProperty("placeholder")&&delete e.placeholder,!t.maxLength&&e.hasOwnProperty("maxLength")&&delete e.maxLength,!t.pattern&&e.hasOwnProperty("rules")&&(e.rules=e.rules.filter(function(e){return!e.hasOwnProperty("pattern")})),!t.required&&e.hasOwnProperty("rules")&&e.rules.forEach(function(e){e.hasOwnProperty("required")&&(e.required=!1)}),!t.disabled&&e.hasOwnProperty("disabled")&&delete e.disabled,!t.max&&e.hasOwnProperty("max")&&delete e.max,!t.min&&e.hasOwnProperty("min")&&delete e.min,!t.precision&&e.hasOwnProperty("precision")&&delete e.precision,!t.format&&e.hasOwnProperty("format")&&delete e.format},a.convertFieldsInitialValue=function(e){var t={};if(!a.props.fieldList)return e;var n=a.props.fieldList;return n.forEach(function(e){return t["".concat(e.keyValue)]={inputType:e.inputType,configValue:e.configValue}}),lt["a"].loopAll(e,function(e,n,r,l){if(l.includes("field")){var o=e,i=o.field,s=o.title,c=de.a.cloneDeep(t[i])||[],u=c.configValue,d=c.inputType;if(e.inputType=d,"object"===typeof u){var p=[{required:u.required,message:"\u8bf7\u5f55\u5165".concat(s)}];u.pattern&&p.push({pattern:j["a"].regExps[u.pattern],message:"\u8bf7\u5f55\u5165\u6b63\u786e\u7684".concat(s)}),e.rules=p,u.hasOwnProperty("field")&&delete u.field,e=Object.assign(e,u),a.filterValue(e,u)}e.disabled=!1}}),e},a.handleDragEnter=function(e){},a.handleDragDrop=function(e){var t=e.node,n=e.dragNode,r=(e.dropToGap,n.props.dataRef),l=t.props.dataRef,o=r.key,i=l.key,s=a.state.treeData;if(r.uiType===l.uiType)if("form"!==r.uiType){var u=de.a.cloneDeep(s),d=lt["a"].findByKey(u,o),p=lt["a"].removeWithPropName(u,"key",o),m=lt["a"].findParentNode(p,i);if(!m){var h=0;return p.map(function(e,t){e.key===i&&(h=t)}),p.splice(h,0,d),void a.setState({treeData:p})}lt["a"].loopTreeData(p,function(e,t,a){if(e.key===m.key){var n=0;e.children.map(function(e,t){e.key===i&&(n=t)}),e.children.splice(n,0,d)}}),a.setState({treeData:p})}else c["a"].info("\u53ea\u80fd\u5b58\u5728\u4e00\u4e2a\u8868\u5355\uff01");else c["a"].info("\u4e0d\u80fd\u8de8\u7ea7\u62d6\u62fd\uff01")},a.handlePreview=function(e){var t=a.state.preview;setTimeout(function(){return a.setState({preview:!t})},100),e.stopPropagation()},a}return b()(t,e),m()(t,[{key:"handleModalCancel",value:function(){var e=Z()(Y.a.mark(function e(){var t;return Y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.state.treeData,e.next=3,this.props.handleOk(t);case 3:return e.next=5,this.props.cancelModal(!1);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleOK",value:function(){var e=Z()(Y.a.mark(function e(){var t;return Y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.state.treeData,e.next=3,this.props.handleOk(t);case 3:return e.next=5,this.props.cancelModal(!1);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e={background:"#fff"},t={fontSize:12},a=[w.a.createElement(s["a"],{type:"primary",key:"back",onClick:this.handleModalCancel.bind(this)},"\u5173\u95ed")],n=this.state.preview,r=w.a.createElement("div",{style:{height:21}},w.a.createElement("span",{className:"func-title"},"\u529f\u80fd\u6a21\u677f\u8bbe\u8ba1"),w.a.createElement(I["a"],{title:"\u9884\u89c8",type:n?"fullscreen-exit":"fullscreen",className:rt.a["func-header-preview"],onClick:this.handlePreview})),l="<<\u53ef\u9009\u8282\u70b9>>",i={height:"80vh",maxHeight:"80vh",padding:0};return w.a.createElement(o["a"],{bodyStyle:n?Object.assign(i,{overflowY:"auto",top:"30px"}):i,centered:!0,keyboard:!1,maskClosable:!1,footer:a,visible:!0,title:r,width:n?"900px":"90vw",onCancel:this.handleModalCancel.bind(this),onOk:this.handleOK.bind(this)},w.a.createElement(C["a"],{style:e},!n&&w.a.createElement(ht,{className:"func-sider-container-left",theme:"light",width:"18%"},w.a.createElement("div",{className:"func-sider-title-left"},l),w.a.createElement("div",{style:{overflowY:"auto",height:"92%"}},w.a.createElement(at["a"],{key:"add",title:"add",draggable:!0,onDragEnter:this.handleDragEnter,onDrop:this.handleDragDrop,switcherIcon:w.a.createElement(I["a"],{type:"down"}),defaultExpandAll:!0,onSelect:this.handleSelect},w.a.createElement(ft,{title:w.a.createElement("span",{title:this.props.rootTitle},w.a.createElement("p",{className:"func-root-title-dot"},this.props.rootTitle)),key:"root"},this.renderTreeNodes(this.state.treeData))))),w.a.createElement(C["a"],null,!n&&w.a.createElement(pt,{className:"func-header-tools"},w.a.createElement("div",{className:rt.a["func-btn-group"]},w.a.createElement(s["a"],{type:"danger",style:t,size:"small",ghost:!0,disabled:this.state.disabledTabsBtn,onClick:this.addTabs},w.a.createElement(I["a"],{type:"switcher"})," \u6807\u7b7e\u9875"),w.a.createElement(s["a"],{type:"danger",style:t,size:"small",ghost:!0,disabled:this.state.disabledTabBtn,onClick:this.addTabChild},w.a.createElement(I["a"],{type:"switcher"})," \u5b50\u9875\u7b7e"),w.a.createElement(s["a"],{type:"primary",style:t,size:"small",ghost:!0,disabled:this.state.disabledColBtn,onClick:this.addCol},w.a.createElement(I["a"],{type:"hdd"}),"\u5206\u5217"),w.a.createElement(s["a"],{type:"primary",style:t,size:"small",ghost:!0,disabled:this.state.disabledGroupBtn,onClick:this.addGroup},w.a.createElement(I["a"],{type:"hdd"}),"\u5206\u7ec4"),w.a.createElement(s["a"],{type:"primary",style:t,size:"small",ghost:!0,disabled:this.state.disabledField,onClick:this.addField},w.a.createElement(I["a"],{type:"form"}),"\u5b57\u6bb5"))),w.a.createElement(mt,null,w.a.createElement(dt["a"],{treeNode:this.convertFieldsInitialValue(this.state.treeData)}))),!n&&w.a.createElement(ut,{nodeData:this.state.nodeData,handleChange:this.handleSideChange,fieldList:this.props.fieldList})))}}]),t}(E["Component"]),gt=yt,vt=a("PvHZ"),bt=(vt["a"].formItemLayoutResponsive,V["a"].Item),Ct=N["a"].Option,Et=function(e){function t(e,a){var n;return d()(this,t),n=f()(this,g()(t).call(this,e,a)),n.selectedDatasetChange=function(e){n.selectedDatasetId=e},n.designBtnClick=function(e){e.stopPropagation(),n.setState({showTemDesignModal:!0})},n.validateFields=function(e,t,a){for(var n=[{key:"name",msg:"\u5b57\u6bb5\u540d\u79f0"},{key:"keyValue",msg:"\u952e\u503c"},{key:"inputType",msg:"\u63a7\u4ef6\u7c7b\u578b"}],r="",l=0;l<t.length;l++){for(var o=t[l],i=!1,s=0;s<n.length;s++){var c=n[s].key;if(!o[c]){i=!0,r="\u8bf7\u5f55\u5165\u7b2c".concat(l+1,"\u884c\u7684").concat(n[s].msg);break}}if(i)break}r?(e.message=r,a(r)):a()},n.handCancelModal=function(e){n.setState({showTemDesignModal:e})},n.handleDesignOk=function(e){n.props.saveLayout(e?JSON.stringify(e):"")},n.getNameById=function(e){var t=n.state.dataSets,a="";return t.forEach(function(t){t.uuId===e&&(a=t.name)}),a},n.handleDataSetModalOk=function(e){e&&e.length>0?n.props.form.setFieldsValue({datasetID:e[0].uuId}):n.props.form.setFieldsValue({datasetID:-1})},n.getData=function(){var e=n.props.form,t=n.state.dataSets;if("function"===typeof e.getFieldValue){var a=e.getFieldValue("datasetID"),r="{}";return t.forEach(function(e){e.uuId===a&&(r=e.param)}),r}},n.state={dataSets:e.dataSets,showTemDesignModal:!1,showHref:!1},n}return b()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.formData,a=t.name,n=t.param,r=t.datasetID,l=t.remark,o=t.href,i=t.useHref,s=t.hrefTitle;n=JSON.parse(n||"[]"),i?this.setState({showHref:!0},function(){e.props.form.setFieldsValue({name:a,param:n,datasetID:r,remark:l,href:o,useHref:i,hrefTitle:s})}):this.props.form.setFieldsValue({name:a,param:n,datasetID:r,remark:l,href:o,useHref:i,hrefTitle:s})}},{key:"componentWillReceiveProps",value:function(e){"dataSets"in e&&this.setState({dataSets:e.dataSets})}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldValue,r=t.setFieldsValue,o=this.props.formData.layout,i=this.state.showHref,c={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},u=(this.state.dataSets.map(function(e,t){return w.a.createElement(Ct,{key:t,value:e.uuId},e.name)}),n("param"));return w.a.createElement("div",null,this.state.showTemDesignModal&&w.a.createElement(gt,{handleOk:this.handleDesignOk,rootTitle:this.props.form.getFieldValue("name"),cancelModal:this.handCancelModal,layout:o,fieldList:u}),w.a.createElement(V["a"],{layout:"horizontal",onSubmit:this.handleSubmit},w.a.createElement(bt,P()({label:"\u540d\u79f0"},c),a("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]})(w.a.createElement(l["a"],{placeholder:"",maxLength:"64"}))),w.a.createElement(bt,P()({label:"\u5173\u8054\u529f\u80fd\u96c6"},c),a("datasetID",{rules:[{required:!i,message:"\u8bf7\u9009\u62e9\u5173\u8054\u529f\u80fd\u96c6"}]})(w.a.createElement(ne["a"],{title:"\u529f\u80fd\u96c6",keyField:"uuId",normalizeValue:this.getNameById,columnType:"dataSet",handleOk:this.handleDataSetModalOk,queryData:this.props.queryData,dataSets:this.state.dataSets}))),w.a.createElement(bt,P()({label:"\u5b57\u6bb5"},c),a("param",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5",validator:this.validateFields}]})(w.a.createElement(Xe,{dataSets:this.props.queryDataSets,dataSetsParam:this.getData(),fatherSetFieldsValue:r}))),w.a.createElement(bt,P()({label:"\u8bbe\u8ba1"},c),a("layout",{rules:[{required:!1}]})(w.a.createElement(s["a"],{onClick:this.designBtnClick,type:"primary",ghost:!0},w.a.createElement(I["a"],{type:"edit"}),"\u70b9\u51fb\u8bbe\u8ba1"))),w.a.createElement(V["a"].Item,P()({label:"\u542f\u7528\u5916\u90e8\u5730\u5740"},c),a("useHref",{initialValue:!1,valuePropName:"checked"})(w.a.createElement(O["a"],{checkedChildren:"\u662f",unCheckedChildren:"\u5426",onClick:function(){e.setState({showHref:!i})}}))),i&&w.a.createElement(w.a.Fragment,null,w.a.createElement(bt,P()({},c,{label:"\u5916\u90e8\u5730\u5740"}),a("href",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5916\u90e8\u94fe\u63a5\u5730\u5740\uff01"}]})(w.a.createElement(l["a"].TextArea,{maxLength:500,rows:4,placeholder:""}))),w.a.createElement(bt,P()({label:"\u94fe\u63a5\u6807\u9898"},c),a("hrefTitle",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u94fe\u63a5\u9875\u6807\u9898"}]})(w.a.createElement(l["a"],{placeholder:"",maxLength:"64"})))),w.a.createElement(bt,P()({label:"\u5907\u6ce8"},c),a("remark",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]})(w.a.createElement(l["a"],{maxLength:512,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8",type:"textarea"})))))}}]),t}(E["Component"]);Et.defaultProps={dataSets:[],queryDataSets:[]};var wt=V["a"].create()(Et),kt=a("i2Dl"),Tt=(a("bZwN"),C["a"].Content),St=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=f()(this,(e=g()(t)).call.apply(e,[this].concat(r))),a.state={layout:"",InputValue:""},a.handleOk=function(){a.form.validateFieldsAndScroll(function(e,t){if(!e){if(!t.useHref&&(!t.param||0===t.param.length))return void c["a"].info("\u8bf7\u5f55\u5165\u5b57\u6bb5\uff01");t.param=JSON.stringify(t.param||[]),t.layout=a.state.layout;var n="edit"===a.props.editType?"functionTemplateModel/update":"functionTemplateModel/create";a.props.dispatch({type:n,payload:{param:t}}).then(function(){c["a"].success("\u4fdd\u5b58\u6210\u529f"),a.handleCancel()})}})},a.handleCancel=function(){a.props.dispatch({type:"functionTemplateModel/stateChange",payload:{showModal:!1,selectedRowKeys:[],selectedRows:[]}}),a.props.dispatch({type:"functionTemplateModel/queryList"})},a.stateChange=function(e){a.props.dispatch({type:"functionTemplateModel/stateChange",payload:e})},a.configfunctionTemplate=function(e){a.setState({layout:e.layout},function(){a.stateChange({editType:"edit",formData:e,showModal:!0})})},a.copyConfigfunctionTemplate=function(){var e=a.props.selectedRows[0]||{};a.setState({layout:e.layout},function(){a.stateChange({editType:"copy",formData:e,showModal:!0})})},a.deletefunctionTemplate=function(){a.setState({layout:""},function(){a.props.dispatch({type:"functionTemplateModel/delete",payload:a.props.selectedRowKeys}).then(function(){c["a"].success("\u5220\u9664\u6210\u529f")})})},a.addfunctionTemplate=function(){a.setState({layout:""},function(){a.stateChange({editType:"create",formData:{},showModal:!0})})},a.selectRowChange=function(e,t){a.stateChange({selectedRowKeys:e,selectedRows:t})},a.handleSaveLayout=function(e){a.setState({layout:e})},a.queryDataSets=function(){a.props.dispatch({type:"functionTemplateModel/queryDataset"})},a.getModalTitle=function(e){switch(e){case"edit":return"\u7f16\u8f91\u529f\u80fd\u6a21\u677f";case"create":return"\u65b0\u589e\u529f\u80fd\u6a21\u677f";case"copy":return"\u590d\u5236\u529f\u80fd\u6a21\u677f";default:return"\u65b0\u589e\u529f\u80fd\u6a21\u677f"}},a}return b()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.selectedRowKeys,n=t.selectedRows,r=t.formData,c=t.listData,u=t.editType,d=t.showModal,p=t.searchText,m=t.querySets,h=t.operateSets,f=t.testLoading,y=t.saveLoading,g=t.loading,v=this.state.layout;v&&(r.layout=this.state.layout);var b=w.a.createElement(w.a.Fragment,null,w.a.createElement(s["a"],{onClick:this.handleCancel},"\u5173\u95ed"),w.a.createElement(s["a"],{type:"primary",loading:y,onClick:this.handleOk},"\u4fdd\u5b58"));return w.a.createElement("div",null,w.a.createElement(o["a"],{title:this.getModalTitle(u),destroyOnClose:!0,keyboard:!1,visible:d,maskClosable:!1,width:1e3,footer:b,onOk:this.handleOk,onCancel:this.handleCancel,wrapClassName:"vertical-center-modal"},w.a.createElement(C["a"],null,w.a.createElement(Tt,{style:{padding:10}},w.a.createElement(i["a"],{spinning:f||y||!1},w.a.createElement(wt,{queryDataSets:m,dataSets:h,formData:r,queryData:this.queryDataSets,saveLayout:this.handleSaveLayout,updateDataSets:this.getOperateDatasets,ref:function(t){return e.form=t}}))))),w.a.createElement("div",{className:"funTempInput"},w.a.createElement("span",null,"\u540d\u79f0",w.a.createElement(l["a"],{placeholder:"\u540d\u79f0/\u5907\u6ce8",onChange:function(t){e.setState({InputValue:t.target.value})},value:this.state.InputValue,style:{width:"200px",marginLeft:"10px"}})),w.a.createElement("span",null,w.a.createElement(s["a"],{style:{marginRight:"10px"},type:"primary",onClick:function(){e.stateChange({searchText:[e.state.InputValue]})}},"\u67e5\u8be2"),w.a.createElement(s["a"],{type:"primary",ghost:!0,onClick:function(){e.setState({InputValue:""}),e.stateChange({searchText:[""]})}},"\u91cd\u7f6e"))),w.a.createElement("div",{className:"funTempList"},w.a.createElement("div",{className:"flex-layout-row list-action",style:{paddingLeft:"0",paddingRight:"0"}},w.a.createElement(s["a"],{type:"primary",icon:"plus",onClick:this.addfunctionTemplate},"\u65b0\u589e"),w.a.createElement(s["a"],{type:"primary",ghost:!0,icon:"copy",onClick:this.copyConfigfunctionTemplate,disabled:0===n.length||n.length>1},"\u590d\u5236"),w.a.createElement(kt["a"],{showPopConfirm:0!==n.length,onConfirm:this.deletefunctionTemplate})),w.a.createElement(D,{selectRowChange:this.selectRowChange,selectedRowKeys:a,configCallback:this.configfunctionTemplate,loading:g,searchText:p,dataSource:c})))}}]),t}(E["Component"]),xt=function(e){var t=e.functionTemplateModel,a=e.loading.models.functionTemplateModel,n=e.loading.effects["functionTemplateModel/test"],l=e.loading.effects["functionTemplateModel/createfunctionTemplate"]||e.loading.effects["functionTemplateModel/updatefunctionTemplate"];return r()({loading:a,testLoading:n,saveLoading:l},t)};t["default"]=Object(k["connect"])(xt)(St)},"2aqK":function(e,t,a){"use strict";a.r(t);var n=a("FQm9"),r=a.n(n);t["default"]=function(e){return r.a.createElement("div",e)}},"2tsh":function(e,t,a){e.exports={procedureParamBox:"procedureParamBox","ant-table-tbody":"ant-table-tbody","ant-table-thead":"ant-table-thead","ant-select-arrow":"ant-select-arrow","procedure-arrow-up":"procedure-arrow-up","procedure-arrow-down":"procedure-arrow-down"}},"53j+":function(e,t,a){"use strict";a.r(t);var n=a("mK77"),r=a.n(n),l=(a("8wx/"),a("oOwq")),o=(a("Ko87"),a("YB5O")),i=(a("n3Pa"),a("SHRx")),s=(a("EdcA"),a("rKq6")),c=a("43Yg"),u=a.n(c),d=a("/tCh"),p=a.n(d),m=a("scpF"),h=a.n(m),f=a("O/V9"),y=a.n(f),g=a("8aBX"),v=a.n(g),b=(a("zHCM"),a("im+1")),C=a("FQm9"),E=a.n(C),w=a("LneV"),k=a("oWQB"),T=a.n(k),S=a("t3Un"),x=(a("KCNJ"),a("rgLj")),D=a("Pru3"),O=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=h()(this,(e=y()(t)).call.apply(e,[this].concat(r))),a.setColumns=function(){var e=function(e,t){return Object(D["c"])(t.name,e)||Object(D["c"])(t.uuId,e)||Object(D["c"])(t.category,e)||Object(D["c"])(t.remark,e)},t=a.props.searchText;a.columns=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",align:"left",filteredValue:t,onFilter:e,sorter:function(e,t){return Object(D["a"])(e.name,t.name)},render:function(e){return Object(D["b"])(e,t[0])}},{title:"\u6807\u8bc6",dataIndex:"uuId",key:"uuId",align:"left",filteredValue:t,onFilter:e,sorter:function(e,t){return e.uuId>t.uuId?1:-1},render:function(e){return Object(D["b"])(e,t[0])}},{title:"\u5206\u7c7b",dataIndex:"category",key:"category",align:"left",sorter:function(e,t){return Object(D["a"])(e.name,t.name)},render:function(e){return Object(D["b"])(e,t[0])}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",align:"left",render:function(e){return Object(D["b"])(e,t[0])}},{title:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",dataIndex:"date",key:"date",sorter:function(e,t){return Object(D["a"])(e.date,t.date)},align:"left"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",align:"left",render:function(e,t){return E.a.createElement("span",null,"edit"===a.props.mode&&E.a.createElement("span",null,E.a.createElement("button",{onClick:function(){return a.props.operationCallback({operation:"config",record:t})},className:"link-button"},"\u7f16\u8f91"),E.a.createElement("div",{className:"ant-divider ant-divider-vertical"}),E.a.createElement("button",{onClick:function(){return a.props.operationCallback({operation:"design",record:t})},className:"link-button"},"\u8bbe\u8ba1"),E.a.createElement("div",{className:"ant-divider ant-divider-vertical"})),E.a.createElement("button",{onClick:function(){return a.props.operationCallback({operation:"preview",record:t})},className:"link-button"},"\u67e5\u770b"))}}]},a.selectRowChange=function(e){a.props.selectRowChange(e)},a}return v()(t,e),p()(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){this.setColumns();var e=this.props,t=e.dataSource,a=e.loading,n=e.mode,r={type:this.props.selectType,onChange:this.props.selectRowChange,selectedRowKeys:this.props.selectedRowKeys};return E.a.createElement(x["a"],{rowKey:"uuId",loading:a,rowSelection:"edit"===n?r:null,columns:this.columns,dataSource:t})}}]),t}(E.a.Component);O.defaultProps={selectType:"checkbox",showActionColumn:!0,mode:"edit",configCallback:function(){},selectRowChange:function(){},searchText:[""]};var I=O,F=a("3CjV"),P=a.n(F),N=a("zAuD"),V=a.n(N),q=(a("PuNp"),a("sVKK")),L=(a("7Hzt"),a("dHFo")),R=(a("ZS9L"),a("W38+")),M=a("TGva"),j=a("8bSQ"),A=R["a"].Item,K=l["a"].TextArea,B=L["a"].TreeNode,U=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=h()(this,(e=y()(t)).call.apply(e,[this].concat(r))),a.getTreeNode=function(e,t){return e.map(function(e){var n=e.name,r=t?"".concat(t,"/").concat(n):"".concat(n);return E.a.createElement(B,{key:r,title:n,value:r},e.children&&a.getTreeNode(e.children,r))})},a}return v()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.editType,n=t.categoryList,r=M["a"].defaultFormItemLayout;return E.a.createElement("div",null,E.a.createElement(R["a"],{layout:"horizontal"},E.a.createElement(A,V()({label:"\u6807\u8bc6"},r),e("uuId",{rules:[{required:!0,message:"\u53ea\u80fd\u8f93\u6570\u5b57"}]})(E.a.createElement(q["a"],{precision:0,min:0,max:999999999,style:{width:"100%"},disabled:"edit"===a,placeholder:"\u8bf7\u8f93\u5165\u62a5\u8868\u6807\u8bc6"}))),E.a.createElement(A,V()({label:"\u540d\u79f0"},r),e("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"},{pattern:/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,message:"\u53ea\u5141\u8bb8\u8f93\u5165\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf"}]})(E.a.createElement(l["a"],P()({placeholder:""},"placeholder","\u8bf7\u8f93\u5165\u540d\u79f0")))),E.a.createElement(A,V()({label:"\u5206\u7c7b"},r),e("category",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5206\u7c7b"}]})(E.a.createElement(j["a"],{categoryList:n}))),E.a.createElement(A,V()({label:"\u5907\u6ce8"},r),e("remark",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]})(E.a.createElement(K,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})))))}}]),t}(C["Component"]);U.defaultProps={editType:"create",categoryList:[]};var z=function(e){var t={},a=["name","category","remark","uuId"],n=e.formData;return a.forEach(function(e){t[e]=R["a"].createFormField({value:n[e]})}),t},H=R["a"].create({mapPropsToFields:z})(U),W=a("BTMt"),_=a("i2Dl"),J=b["a"].Content,Q=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=h()(this,(e=y()(t)).call.apply(e,[this].concat(r))),a.handleOk=function(){a.form.validateFields(function(e,t){var n=Object.assign({},a.props.formData,t);e||a.props.dispatch({type:"chartModel/modalHandleOk",payload:{formData:n,editType:a.props.editType}}).then(function(){return s["a"].success("\u4fdd\u5b58\u6210\u529f")})})},a.handleCancel=function(){a.props.dispatch({type:"chartModel/hideModal"})},a.createChart=function(){a.props.dispatch({type:"chartModel/showConfig",payload:{editType:"create",formData:{}}})},a.stateChange=function(e){a.props.dispatch({type:"chartModel/stateChange",payload:e})},a.deleteChart=function(){a.props.dispatch({type:"chartModel/delete",payload:a.props.selectedRowKeys})},a.addPostData=function(e){var t=!1,a=window.location.href,n=new Object;if(-1!=a.indexOf("?"))for(var r=a.split("?")[1],l=r.split("&"),o=0;o<l.length;o++)l[o].split("=")[0]&&l[o].split("=")[0].includes(e)&&(t=!0,n[l[o].split("=")[0]]=unescape(l[o].split("=")[1]));return!!t&&n},a.operationChart=function(e){var t=e.operation,n=e.record;sessionStorage.removeItem("template_filter");var r=a.props.searchText;if("config"===t)a.props.dispatch({type:"chartModel/showConfig",payload:{editType:"edit",formData:n}});else if("design"===t){var l=a.addPostData("USER_TOKEN_INFO"),o={uuId:n.uuId,searchText:r};l&&Object.assign(o,l),a.props.history.push({pathname:"/report/designer",search:T.a.stringify(o)})}else a.checkPermission(n)},a.checkPermission=function(e){var t={userId:localStorage.getItem("userId"),uuId:e.uuId};Object(S["a"])("database/previewQueryOption",t).then(function(){a.props.dispatch({type:"chartModel/stateChange",payload:{formData:e,showReportPreview:!0}})}).catch(function(){a.props.dispatch({type:"chartModel/stateChange",payload:{showReportPreview:!1}})})},a.copyChart=function(){a.props.dispatch({type:"chartModel/showConfig",payload:{editType:"copy",formData:a.props.selectedRows[0]||{}}})},a.selectRowChange=function(e,t){a.props.dispatch({type:"chartModel/selectRowChange",payload:{selectedRowKeys:e,selectedRows:t}})},a.getTitle=function(e){var t={copy:"\u590d\u5236",create:"\u65b0\u589e",edit:"\u7f16\u8f91"};return"".concat(t[e],"\u62a5\u8868")},a}return v()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.selectedRowKeys,n=t.selectedRows,r=t.listData,s=t.showModal,c=t.editType,u=t.formData,d=t.categoryList,p=t.mode,m=t.loading,h=t.showReportPreview,f=t.searchText,y=this.getTitle(c);return E.a.createElement("div",{className:"report-view-layer"},h&&E.a.createElement(W["a"],{uuId:u.uuId,handleCancel:function(){sessionStorage.removeItem("template_filter"),e.props.dispatch({type:"chartModel/stateChange",payload:{showReportPreview:!1}})}}),E.a.createElement(i["a"],{title:y,destroyOnClose:!0,keyChart:!1,visible:s,maskClosable:!1,width:500,okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",onOk:this.handleOk,onCancel:this.handleCancel,wrapClassName:"vertical-center-modal"},E.a.createElement(b["a"],null,E.a.createElement(J,{style:{padding:10}},E.a.createElement(H,{editType:c,formData:u,categoryList:d,ref:function(t){return e.form=t}})))),E.a.createElement("div",{className:"flex-layout-row list-action"},"edit"===p&&E.a.createElement(E.a.Fragment,null,E.a.createElement(o["a"],{type:"primary",icon:"plus",onClick:this.createChart},"\u65b0\u589e"),E.a.createElement(o["a"],{type:"primary",ghost:!0,icon:"copy",onClick:this.copyChart,disabled:0===n.length||n.length>1},"\u590d\u5236"),E.a.createElement(_["a"],{showPopConfirm:0!==n.length,onConfirm:this.deleteChart})),E.a.createElement(l["a"].Search,{placeholder:"\u540d\u79f0/\u6807\u8bc6/\u5206\u7c7b/\u5907\u6ce8",enterButton:"\u641c\u7d22",className:"search-button",defaultValue:f[0],onSearch:function(t){return e.stateChange({searchText:[t]})},onPressEnter:function(t){return e.stateChange({searchText:[t.target.value]})}})),E.a.createElement(I,{dataSource:r,selectedRowKeys:a,loading:m,mode:p,searchText:f,selectRowChange:this.selectRowChange,operationCallback:this.operationChart}))}}]),t}(C["Component"]);Q.defaultProps={};var Y=function(e){var t=e.chartModel,a=e.loading.models.chartModel;return r()({loading:a},t)};t["default"]=Object(w["connect"])(Y)(Q)},"8bSQ":function(e,t,a){"use strict";var n=a("43Yg"),r=a.n(n),l=a("/tCh"),o=a.n(l),i=a("scpF"),s=a.n(i),c=a("O/V9"),u=a.n(c),d=a("8aBX"),p=a.n(d),m=(a("7Hzt"),a("dHFo")),h=a("FQm9"),f=a.n(h),y=(a("EH+i"),m["a"].TreeNode),g=function(e){function t(e){var a;return r()(this,t),a=s()(this,u()(t).call(this,e)),a.handleChange=function(e){a.setState({value:e}),a.triggerChange(e)},a.triggerChange=function(e){var t=a.props.onChange;t&&t(e)},a.getTreeNode=function(e,t){return e.map(function(e){var n=e.categoryName,r=t?"".concat(t,"/").concat(n):"".concat(n);return f.a.createElement(y,{key:r,title:n,value:r},e.children&&a.getTreeNode(e.children,r))})},a.state={value:e.value},a}return p()(t,e),o()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){"value"in e&&this.setState({value:e.value})}},{key:"render",value:function(){return f.a.createElement(m["a"],{allowClear:!0,dropdownStyle:{maxHeight:300,overflow:"auto"},treeDefaultExpandAll:!0,treeNodeLabelProp:"value",onChange:this.handleChange,value:this.state.value},this.getTreeNode(this.props.categoryList))}}]),t}(h["Component"]);g.defaultProps={size:"default",categoryList:[]},t["a"]=g},PvHZ:function(e,t,a){"use strict";a("Ko87");var n=a("YB5O"),r=a("FQm9"),l=a.n(r);t["a"]={loadableConfig:{delay:300,timeout:5e3},formItemLayout:{labelCol:{span:6},wrapperCol:{span:16}},formItemLayoutResponsive:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},formTypeDict:[{label:"\u7cfb\u7edf\u8868\u5355",color:"#87d068"},{label:"URL\u8868\u5355",color:"#2db7f5"}],bodyStyle:{padding:"0 6px 6px 6px"},pagination:{pageSize:10,size:"",hideOnSinglePage:!1,showSizeChanger:!0,pageSizeOptions:["5","10","20","30","40"],showQuickJumper:!0,showTotal:function(e,t){return l.a.createElement("span",{style:{marginRight:"20px"}},"\u5f53\u524d\u663e\u793a ".concat(t[0],"-").concat(t[1]," \u6761 \u5171 ").concat(e," \u6761\u8bb0\u5f55"))},itemRender:function(e,t,a){return"prev"===t?l.a.createElement(n["a"],{icon:"left"}):"next"===t?l.a.createElement(n["a"],{icon:"right"}):a}},dateFormat:"YYYY-MM-DD HH:mm:ss",showTime:!0,assistStrategy:{parallelAssist:"\u4e0d\u7b49\u5f85\u529e\u7ee7\u7eed\u6267\u884c",serialAssist:"\u7b49\u5f85\u5f85\u529e\u518d\u6267\u884c"},rejectStrategy:{submitInOrder:"\u9a73\u56de\u5230\u5f00\u59cb\uff0c\u91cd\u65b0\u6309\u987a\u5e8f\u8d70\u6d41\u7a0b",submit2OriginActivity:"\u9a73\u56de\u5230\u5f00\u59cb\uff0c\u8df3\u8f6c\u5230\u9a73\u56de\u8282\u70b9",submit2InputActivity:"\u9a73\u56de\u5230\u5f00\u59cb\uff0c\u81ea\u5b9a\u4e49\u8df3\u8f6c\u8282\u70b9"},beanType:[{key:1,value:"\u4efb\u52a1\u76d1\u542c\u5668"},{key:2,value:"\u7528\u6237\u4efb\u52a1\u8fc7\u671f\u65f6\u95f4\u5ef6\u65f6\u63a5\u53e3"},{key:3,value:"\u4f1a\u7b7e\u7528\u6237\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u63a5\u53e3"},{key:4,value:"\u6d41\u7a0b\u53d1\u8d77\u65f6\u7684\u56de\u8c03\u63a5\u53e3"},{key:5,value:"\u6d41\u7a0b\u7ed3\u675f\u65f6\u7684\u56de\u8c03\u63a5\u53e3"},{key:6,value:"\u6d41\u7a0b\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7ed3\u70b9\u626d\u8f6c\u7684\u56de\u8c03\u63a5\u53e3"},{key:0,value:"\u5176\u4ed6"}]}},bgPU:function(e,t,a){"use strict";a.r(t);a("/ySr");var n=a("F0ZO"),r=(a("n3Pa"),a("SHRx")),l=(a("KCNJ"),a("rgLj")),o=(a("qDyL"),a("nwUc")),i=(a("8wx/"),a("oOwq")),s=(a("Hvxc"),a("Ft10")),c=(a("Ko87"),a("YB5O")),u=(a("L7jA"),a("KVln")),d=(a("jTJM"),a("KmIe")),p=(a("EdcA"),a("rKq6")),m=a("mK77"),h=a.n(m),f=a("43Yg"),y=a.n(f),g=a("/tCh"),v=a.n(g),b=a("scpF"),C=a.n(b),E=a("O/V9"),w=a.n(E),k=a("8aBX"),T=a.n(k),S=a("FQm9"),x=a.n(S),D=a("PvHZ"),O=a("iHE4"),I=a("LneV"),F=(a("ZS9L"),a("W38+")),P=a("zAuD"),N=a.n(P),V=(a("7Hzt"),a("dHFo")),q=a("t3Un"),L=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=C()(this,(e=w()(t)).call.apply(e,[this].concat(r))),a.state={treeData:[]},a.getTreeNode=function(e){return e.map(function(e){var t=e.categoryId,n=e.categoryName;return x.a.createElement(V["a"].TreeNode,{key:t,value:t,title:n},e.children&&a.getTreeNode(e.children))})},a}return T()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.type,a={};t&&(a.type=t),Object(q["d"])("/category/categoryList",a).then(function(t){return e.setState({treeData:t.resultData})})}},{key:"render",value:function(){var e=this.state.treeData,t=this.props,a=t.form,n=t.formItemLayout,r=t.label,l=t.hasFeedback,o=t.id,i=t.formData,s=t.rules,c=t.disabled,u=a.getFieldDecorator;return x.a.createElement(F["a"].Item,N()({label:r},n,{hasFeedback:l}),u(o,{initialValue:i[o],rules:s})(x.a.createElement(V["a"],{showSearch:!0,allowClear:!0,treeDefaultExpandAll:!0,placeholder:"\u8bf7\u9009\u62e9".concat(r),searchPlaceholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0",dropdownStyle:{maxHeight:250,overflow:"auto"},treeNodeFilterProp:"title",disabled:c},this.getTreeNode(e))))}}]),t}(S["Component"]),R=a("kfnS"),M=a.n(R),j=function(e){function t(){return y()(this,t),C()(this,w()(t).apply(this,arguments))}return T()(t,e),v()(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.formData,n=t.getFieldDecorator,r=D["a"].formItemLayout;return x.a.createElement(F["a"],null,x.a.createElement(F["a"].Item,N()({label:"\u5206\u7c7b\u540d\u79f0"},r,{hasFeedback:!0}),n("categoryName",{initialValue:a.categoryName,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"},{max:64,message:"\u6700\u5927\u957f\u5ea6\u4e3a64"}]})(x.a.createElement(i["a"],{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}))),x.a.createElement(L,{form:t,formItemLayout:r,label:"\u4e0a\u7ea7\u5206\u7c7b",hasFeedback:!0,id:"parentId",formData:a,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],disabled:!M()(a)}))}}]),t}(S["Component"]),A=F["a"].create()(j),K=function(e){return{loading:e.global.loading,proStartWindow:e.setWindowModel.proStartWindow,proToDoWindow:e.setWindowModel.proToDoWindow,proCCWindow:e.setWindowModel.proCCWindow,proDraftWindow:e.setWindowModel.proDraftWindow,proFinishWindow:e.setWindowModel.proFinishWindow,proApplyWindow:e.setWindowModel.proApplyWindow,proInstMonitorWindow:e.setWindowModel.proInstMonitorWindow}},B=a("Pru3"),U=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=C()(this,(e=w()(t)).call.apply(e,[this].concat(r))),a.state={dataSource:[],dataSourceCopy:[],expandedRowKeys:[],pagination:h()({},D["a"].pagination),searchText:null,formData:{},visible:!1},a.handleTableChange=function(e){return a.setState({pagination:e})},a}return T()(t,e),v()(t,[{key:"componentDidMount",value:function(){this.categoryList()}},{key:"categoryList",value:function(){var e=this;Object(q["d"])("/category/categoryList",{}).then(function(t){e.setState({dataSource:t.resultData,dataSourceCopy:t.resultData})})}},{key:"editCategory",value:function(e){this.setState({visible:!0,formData:h()({},e)})}},{key:"delCategory",value:function(e){var t=this;Object(q["d"])("/category/deleteCategory",e).then(function(e){p["a"].success("\u5220\u9664\u6210\u529f"),t.categoryList()})}},{key:"getFilterNodes",value:function(e,t,a){for(var n=0;n<e.length;n++){var r={};if(e[n].categoryName.toLowerCase().includes(t.toLowerCase())&&(r=h()({},e[n]),r.children=null),e[n].children){var l=this.getFilterNodes(e[n].children,t,[]);l.length>0&&(r=h()({},e[n]),r.children=l)}M()(r)||a.push(r)}return a}},{key:"getExpandedRowKeys",value:function(e,t){for(var a=0;a<e.length;a++)if(e[a].children&&e[a].children.length>0){t.push(e[a].categoryId);var n=this.getExpandedRowKeys(e[a].children,[]);n.length>0&&(t=t.concat(n))}return t}},{key:"filterCategory",value:function(e){var t=this.state.dataSourceCopy;if(e.length>0){var a=this.getFilterNodes(t,e,[]),n=this.getExpandedRowKeys(a,[]);this.setState({dataSource:a,searchText:e,expandedRowKeys:n})}else this.setState({dataSource:t,searchText:e,expandedRowKeys:[]})}},{key:"onOkCategoryForm",value:function(){var e=this,t=this.state.formData,a=this.categoryForm.props.form;a.validateFields(function(a,n){if(!a){var r=h()({},n);r.categoryId=t.categoryId,Object(q["d"])("/category/categoryDetail",{category:r.parentId}).then(function(t){var a=t;r.type=a.type,Object(q["d"])("/category/saveCategory",r).then(function(t){p["a"].success("\u4fdd\u5b58\u6210\u529f"),e.setState({visible:!1}),e.categoryList()})})}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataSource,p=t.expandedRowKeys,m=t.pagination,h=t.searchText,f=t.formData,y=t.visible,g=D["a"].bodyStyle,v=[{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"categoryName",sorter:function(e,t){return Object(B["a"])(e.categoryName,t.categoryName)},render:function(e){return Object(B["b"])(e,h)}},{title:"\u64cd\u4f5c",dataIndex:"operation",width:"20%",render:function(t,a){return x.a.createElement(S["Fragment"],null,x.a.createElement(d["a"],{title:"\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:e.delCategory.bind(e,a)},x.a.createElement("a",{disabled:!a.parentId},"\u5220\u9664")),x.a.createElement(u["a"],{type:"vertical"}),x.a.createElement("a",{onClick:e.editCategory.bind(e,a),disabled:!a.parentId},"\u7f16\u8f91"))}}],b=function(t,a){var n="categoryId",r=e.state.expandedRowKeys;t?r.push(a[n]):r=r.filter(function(e){return e!==a[n]}),e.setState({expandedRowKeys:r})};return x.a.createElement(n["a"],{bordered:!1,bodyStyle:g},x.a.createElement(o["a"],{gutter:{xs:8,sm:16,md:24,lg:32}},x.a.createElement(s["a"],{md:12},x.a.createElement(c["a"],{type:"primary",icon:"plus",className:"operate-button",onClick:function(){return e.setState({visible:!0,formData:{}})}},"\u65b0\u5efa")),x.a.createElement(s["a"],{md:12},x.a.createElement(i["a"].Search,{placeholder:"\u8bf7\u8f93\u5165",enterButton:"\u641c\u7d22",className:"search-button",onSearch:function(t){return e.filterCategory(t)}}))),x.a.createElement(l["a"],{loading:this.props.loading,rowKey:function(e){return e.categoryId},dataSource:a,columns:v,pagination:m,scroll:{x:600},expandedRowKeys:p,onExpand:b,onChange:this.handleTableChange}),x.a.createElement(r["a"],{title:"\u65b0\u5efa\u5206\u7c7b",maskClosable:!1,keyboard:!1,centered:!0,destroyOnClose:!0,visible:y,onOk:this.onOkCategoryForm.bind(this),onCancel:function(){return e.setState({visible:!1})}},x.a.createElement(A,{formData:f,wrappedComponentRef:function(t){return e.categoryForm=t}})))}}],[{key:"getParentKeys",value:function(e,a,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=0;l<n.length;l++){var o=r.concat();if(o.push(n[l][e]),n[l][e]===a)return o;if(n[l].children){var i=t.getParentKeys(e,a,n[l].children,o);if(i)return i}}}}]),t}(S["Component"]);t["default"]=Object(O["a"])(Object(I["connect"])(K)(U))},i2Dl:function(e,t,a){"use strict";a("jTJM");var n=a("KmIe"),r=(a("Ko87"),a("YB5O")),l=a("FQm9"),o=a.n(l),i=(a("EH+i"),function(e){var t=e.showPopConfirm,a=e.onConfirm;return o.a.createElement(o.a.Fragment,null,t&&o.a.createElement(n["a"],{title:"\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:a},o.a.createElement(r["a"],{type:"danger",icon:"delete"},"\u5220\u9664")),!t&&o.a.createElement(r["a"],{type:"danger",icon:"delete",disabled:!0},"\u5220\u9664"))});i.defaultProps={showPopConfirm:!1,onConfirm:function(){}},t["a"]=i},"i8+3":function(e,t,a){"use strict";a.r(t);a("8wx/");var n=a("oOwq"),r=(a("2Kaa"),a("aLJi")),l=(a("n3Pa"),a("SHRx")),o=(a("Ko87"),a("YB5O")),i=a("mK77"),s=a.n(i),c=(a("EdcA"),a("rKq6")),u=a("43Yg"),d=a.n(u),p=a("/tCh"),m=a.n(p),h=a("scpF"),f=a.n(h),y=a("O/V9"),g=a.n(y),v=a("8aBX"),b=a.n(v),C=(a("zHCM"),a("im+1")),E=a("FQm9"),w=a.n(E),k=a("LneV"),T=(a("KCNJ"),a("rgLj")),S=a("TGva"),x=a("Pru3"),D=function(e){function t(e){var a;return d()(this,t),a=f()(this,g()(t).call(this,e)),a.componentDidMount=function(){},a.getTableScroll=function(){var e={};return e.y=window.innerHeight-180,e},a.setColumns=function(){var e=function(e,t){return Object(x["c"])(t.name,e)||Object(x["c"])(t.uuId,e)||Object(x["c"])(S["a"].sourceTypes[t.sourceType],e)||0!==t.dbType&&Object(x["c"])(S["a"].dbTypes[t.dbType].value,e)||Object(x["c"])(t.url,e)||Object(x["c"])(t.remark,e)},t=a.props.searchText;a.columns=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",width:"15%",align:"left",filteredValue:t,onFilter:e,sorter:function(e,t){return Object(x["a"])(e.name,t.name)},render:function(e){return Object(x["b"])(e,t[0])}},{title:"\u6807\u8bc6",dataIndex:"uuId",width:"10%",key:"uuId",align:"left",sorter:function(e,t){return e.uuId>t.uuId?1:-1},render:function(e){return Object(x["b"])(e,t[0])}},{title:"\u6570\u636e\u6e90\u7c7b\u578b",dataIndex:"sourceType",key:"sourceType",width:"10%",align:"left",sorter:function(e,t){return Object(x["a"])(e.sourceType,t.sourceType)},render:function(e){return Object(x["b"])(S["a"].sourceTypes[e],t[0])}},{title:"\u6570\u636e\u5e93\u7c7b\u578b",dataIndex:"dbType",key:"dbType",width:"10%",align:"left",sorter:function(e,t){return e.dbType>t.dbType?1:-1},render:function(e){return 0===e?null:Object(x["b"])(S["a"].dbTypes[e].value,t[0])}},{title:"\u5730\u5740",dataIndex:"url",width:"11%",key:"url",align:"left",render:function(e){return Object(x["b"])(e,t[0])}},{title:"\u7aef\u53e3",dataIndex:"port",key:"port",width:"10%",align:"left",render:function(e){return 0===e?null:e}},{title:"\u5907\u6ce8",dataIndex:"remark",width:"10%",key:"remark",align:"left",sorter:function(e,t){return e.dbType>t.dbType?1:-1},render:function(e){return Object(x["b"])(e,t[0])}},{title:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",dataIndex:"date",key:"date",sorter:function(e,t){return Object(x["a"])(e.date,t.date)},align:"left"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,t){return w.a.createElement("button",{onClick:function(){return a.props.configCallback(t)},className:"link-button"},"\u914d\u7f6e")}}]},a.state={},a}return b()(t,e),m()(t,[{key:"render",value:function(){this.setColumns();var e=this.props,t=e.dataSource,a=e.loading,n={type:this.props.selectType,onChange:this.props.selectRowChange,selectedRowKeys:this.props.selectedRowKeys};return w.a.createElement(T["a"],{rowKey:"uuId",loading:a,rowSelection:n,columns:this.columns,dataSource:t})}}]),t}(w.a.Component);D.defaultProps={selectType:"checkbox",showActionColumn:!0,searchText:[""],configCallback:function(){},selectRowChange:function(){}};var O=D,I=(a("PuNp"),a("sVKK")),F=(a("L7jA"),a("KVln")),P=a("zAuD"),N=a.n(P),V=a("cO38"),q=a.n(V),L=(a("mlbU"),a("coPZ")),R=(a("ZS9L"),a("W38+")),M=1,j=0,A="We@53&es&esT*7%s";function K(){this.mode=0,this.sk=[]}function B(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function U(e,t,a){t[a]=e>>>24,t[a+1]=e>>>16,t[a+2]=e>>>8,t[a+3]=e}function z(e,t){var a=(4294967295&e)<<t,n=e>>>32-t;return a|n}var H=[[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5],[43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153],[156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98],[228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166],[71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168],[104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53],[30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135],[212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158],[234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161],[224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227],[29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111],[213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81],[141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216],[10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176],[137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132],[24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72]],W=[2746333894,1453994832,1736282519,2993693404],_=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257];function J(e){var t=e>>>4,a=e%16;return H[t][a]}function Q(e){var t=0,a=0,n=new Uint8Array(4),r=new Array(4);return U(e,n,0),r[0]=J(n[0]),r[1]=J(n[1]),r[2]=J(n[2]),r[3]=J(n[3]),t=B(r,0),a=t^z(t,2)^z(t,10)^z(t,18)^z(t,24),a}function Y(e,t,a,n,r){return e^Q(t^a^n^r)}function G(e){var t=0,a=0,n=new Uint8Array(4),r=new Array(4);return U(e,n,0),r[0]=J(n[0]),r[1]=J(n[1]),r[2]=J(n[2]),r[3]=J(n[3]),t=B(r,0),a=t^z(t,13)^z(t,23),a}function Z(e,t){var a=new Array(4),n=new Array(36),r=0;for(a[0]=B(t,0),a[1]=B(t,4),a[2]=B(t,8),a[3]=B(t,12),n[0]=a[0]^W[0],n[1]=a[1]^W[1],n[2]=a[2]^W[2],n[3]=a[3]^W[3];r<32;r++)n[r+4]=n[r]^G(n[r+1]^n[r+2]^n[r+3]^_[r]),e[r]=n[r+4]}function $(e,t,a){var n=0,r=new Array(36);r[0]=B(t,0),r[1]=B(t,4),r[2]=B(t,8),r[3]=B(t,12);while(n<32)r[n+4]=Y(r[n],r[n+1],r[n+2],r[n+3],e[n]),n++;U(r[35],a,0),U(r[34],a,4),U(r[33],a,8),U(r[32],a,12)}function X(e,t){var a=e[t];e[t]=e[31-t],e[31-t]=a}function ee(e,t){e.mode=M,Z(e.sk,t)}function te(e,t){var a;for(e.mode=j,Z(e.sk,t),a=0;a<16;a++)X(e.sk,a)}function ae(e,t){var a=0,n=t.length,r=new Array;while(n>0){var l=t.slice(a,a+16),o=new Uint8Array(16);$(e.sk,l,o);for(var i=0;i<16;i++)r[a+i]=o[i];a+=16,n-=16}return r}function ne(e){var t,a,n=new Array;t=e.length;for(var r=0;r<t;r++)a=e.charCodeAt(r),a>=65536&&a<=1114111?(n.push(a>>18&7|240),n.push(a>>12&63|128),n.push(a>>6&63|128),n.push(63&a|128)):a>=2048&&a<=65535?(n.push(a>>12&15|224),n.push(a>>6&63|128),n.push(63&a|128)):a>=128&&a<=2047?(n.push(a>>6&31|192),n.push(63&a|128)):n.push(255&a);return n}function re(e){if("string"===typeof e)return e;for(var t="",a=e,n=0;n<a.length;n++){var r=a[n].toString(2),l=r.match(/^1+?(?=0)/);if(l&&8==r.length){for(var o=l[0].length,i=a[n].toString(2).slice(7-o),s=1;s<o;s++)i+=a[s+n].toString(2).slice(2);t+=String.fromCharCode(parseInt(i,2)),n+=o-1}else{if(!a[n])continue;t+=String.fromCharCode(a[n])}}return t}var le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function oe(e){var t,a,n,r,l,o,i,s="",c=0;while(c<e.length)t=e[c++],a=e[c++],n=e[c++],r=t>>2,l=(3&t)<<4|a>>4,o=(15&a)<<2|n>>6,i=63&n,isNaN(a)?o=i=64:isNaN(n)&&(i=64),s=s+le.charAt(r)+le.charAt(l)+le.charAt(o)+le.charAt(i);return s}function ie(e){var t,a,n,r,l,o,i,s=new Array,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length)r=le.indexOf(e.charAt(c++)),l=le.indexOf(e.charAt(c++)),o=le.indexOf(e.charAt(c++)),i=le.indexOf(e.charAt(c++)),t=r<<2|l>>4,a=(15&l)<<4|o>>2,n=(3&o)<<6|i,s.push(t),64!=o&&s.push(a),64!=i&&s.push(n);return s}function se(e){if(!e)return A;e=e.replace(/[^\x00-\xff]/g,"00");var t=e.length;if(16===t)return e;if(t>16)return e.substring(0,16);for(var a=0;a<16-t;a++)e="0"+e;return e}var ce=function(e,t){var a=new K;a.mode=M;var n=ne(se(t));ee(a,n);var r=ae(a,ne(e)),l=oe(r);return l},ue=function(e,t){var a=new K;a.mode=j;var n=ne(se(t));te(a,n);var r=ie(e),l=ae(a,r);return re(l)},de={decrypt_ECB:ue,encrypt_ECB:ce},pe=R["a"].Item,me=L["a"].Option,he="jdbc",fe="msg",ye=n["a"].TextArea,ge=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=f()(this,(e=g()(t)).call.apply(e,[this].concat(r))),a.state={sourceType:he},a.sourceTypeChange=function(e){a.setState({sourceType:e},function(){var e;e={dbType:""},a.props.form.setFieldsValue(e)})},a}return b()(t,e),m()(t,[{key:"componentDidMount",value:function(){"create"!==this.props.editType&&this.setFormData(this.props.formData)}},{key:"setFormData",value:function(e){var t=this;this.selectItemData=e;var a,n=e.sourceType||he,r=e.name,l=e.dbType,o=e.url,i=e.port,c=e.userName,u=e.password,d=e.remark,p=e.catalog,m=u;try{m=de.decrypt_ECB(u,null)}catch(e){console.log(e)}if(l&&(l=l.toString()),n===he)a={name:r,dbType:l,url:o,port:i,userName:c,password:m,remark:d,sourceType:n,catalog:p};else{var h;a={name:r,dbType:l,url:o,port:i,userName:c,remark:d,sourceType:n};try{h=JSON.parse(e.param),h={bpservername:h.bpservername,xpservername:h.xpservername,passcode:h.passcode,protocal:h.protocal,sendQName:h.sendQName,receiveQName:h.receiveQName,timeout:h.timeout},a=s()({},a,h)}catch(e){console.log("\u6570\u636e\u683c\u5f0f\u6709\u8bef")}}this.setState({sourceType:n},function(){t.props.form.setFieldsValue(a)})}},{key:"render",value:function(){for(var e=this,t=this.props.form.getFieldDecorator,a=this.state.sourceType,r={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},l=[],o=0,i=Object.entries(S["a"].dbTypes);o<i.length;o++){var s=i[o],c=q()(s,2),u=c[0],d=c[1];l.push(w.a.createElement(me,{key:u,disabled:!d.ableSourceTypes.some(function(t){return t===e.state.sourceType}),value:u},d.value))}for(var p=[],m=0,h=Object.entries(S["a"].sourceTypes);m<h.length;m++){var f=h[m],y=q()(f,2),g=y[0],v=y[1];p.push(w.a.createElement(me,{key:g,value:g},v))}for(var b=[],C=0,E=Object.entries(S["a"].protocalTypes);C<E.length;C++){var k=E[C],T=q()(k,2),x=T[0],D=T[1];b.push(w.a.createElement(me,{key:x,value:x},D))}var O=this.state.sourceType===fe?"\u62a5\u6587\u4fe1\u606f":"\u6570\u636e\u5e93\u4fe1\u606f";return w.a.createElement(R["a"],{className:"ant-form-custom",layout:"horizontal",onSubmit:this.handleSubmit},w.a.createElement(pe,N()({label:"\u6570\u636e\u6e90\u540d\u79f0"},r),t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"}))),w.a.createElement(pe,N()({label:"\u6570\u636e\u6e90\u7c7b\u578b"},r),t("sourceType",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u578b"}],onChange:this.sourceTypeChange.bind(this)})(w.a.createElement(L["a"],null,p))),w.a.createElement(F["a"],{dashed:!0},O),w.a.createElement(pe,N()({label:a===he?"\u6570\u636e\u5e93\u7c7b\u578b":"\u62a5\u6587\u6765\u6e90"},r),t("dbType",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u578b"}],normalize:function(e){return 0==e?null:e}})(w.a.createElement(L["a"],null,l))),w.a.createElement(pe,N()({label:"\u5730\u5740"},r),t("url",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5730\u5740"}]})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u5730\u5740"}))),w.a.createElement(pe,N()({label:"\u7aef\u53e3"},r),t("port",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7aef\u53e3"}],normalize:function(e){return 0==e?null:e}})(w.a.createElement(n["a"],{maxLength:5,placeholder:"\u8bf7\u8f93\u5165\u7aef\u53e3"}))),this.state.sourceType===he&&w.a.createElement("span",null,w.a.createElement(pe,N()({label:"\u6570\u636e\u5e93\u540d\u79f0"},r),t("catalog",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6570\u636e\u5e93\u540d\u79f0"}]})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u6570\u636e\u5e93\u540d\u79f0"}))),w.a.createElement(pe,N()({label:"\u6570\u636e\u5e93\u7528\u6237\u540d"},r),t("userName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6570\u636e\u5e93\u7528\u6237\u540d"}]})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u6570\u636e\u5e93\u7528\u6237\u540d"}))),w.a.createElement(pe,N()({label:"\u6570\u636e\u5e93\u5bc6\u7801"},r),t("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(w.a.createElement(n["a"].Password,{visibilityToggle:!1,maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})))),this.state.sourceType===fe&&w.a.createElement("span",null,w.a.createElement(pe,N()({label:"bp\u670d\u52a1\u540d"},r),t("bpservername",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165bp\u670d\u52a1\u540d"}],initialValue:"KCBP01"})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165bp\u670d\u52a1\u540d",type:""}))),w.a.createElement(pe,N()({label:"xp\u670d\u52a1\u540d"},r),t("xpservername",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165xp\u670d\u52a1\u540d"}],initialValue:"KCXP00"})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165xp\u670d\u52a1\u540d",type:""}))),w.a.createElement(pe,N()({label:"\u901a\u884c\u8bc1"},r),t("passcode",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u901a\u884c\u8bc1"}],initialValue:"888888"})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u901a\u884c\u8bc1",type:""}))),w.a.createElement(pe,N()({label:"\u534f\u8bae\u7c7b\u578b"},r),t("protocal",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u534f\u8bae\u7c7b\u578b"}]})(w.a.createElement(L["a"],null,b))),w.a.createElement(pe,N()({label:"\u53d1\u9001\u961f\u5217"},r),t("sendQName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53d1\u9001\u961f\u5217"}]})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u961f\u5217",type:""}))),w.a.createElement(pe,N()({label:"\u63a5\u53d7\u961f\u5217"},r),t("receiveQName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53d7\u961f\u5217"}]})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u63a5\u53d7\u961f\u5217",type:""}))),w.a.createElement(pe,N()({label:"\u8d85\u65f6\u65f6\u957f(\u79d2)"},r),t("timeout",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d85\u65f6\u65f6\u957f"}],initialValue:10})(w.a.createElement(I["a"],{min:0,max:3600,placeholder:"\u8bf7\u8f93\u5165\u8d85\u65f6\u65f6\u957f",type:"",style:{width:"100%"}})))),w.a.createElement(pe,N()({label:"\u5907\u6ce8"},r),t("remark",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]})(w.a.createElement(ye,{maxLength:512,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))))}}]),t}(w.a.Component),ve=R["a"].create()(ge),be=R["a"].Item,Ce=n["a"].TextArea,Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=e.sourceType||"jdbc",n=e.uuId,r=e.name,l=e.dbType,o=e.url,i=e.port,c=e.userName,u=e.password,d=e.remark,p=e.catalog;l&&(l=l.toString());var m=null;if("jdbc"===a)m={uuId:n,name:r,dbType:l,url:o,port:i,userName:c,password:u,remark:d,sourceType:a,catalog:p};else{var h;m={uuId:n,name:r,dbType:l,url:o,port:i,userName:c,remark:d,sourceType:a};try{h=JSON.parse(e.param),h={bpservername:h.bpservername,xpservername:h.xpservername,passcode:h.passcode,protocal:h.protocal,sendQName:h.sendQName,receiveQName:h.receiveQName},m=s()({},m,h)}catch(e){console.log("\u6570\u636e\u683c\u5f0f\u6709\u8bef")}}t(m)},we=function(e){var t=e.form,a=t.getFieldDecorator,r=t.setFieldsValue,l=e.formData,o={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return Object(E["useEffect"])(function(){Ee(l,r)},[l]),w.a.createElement(R["a"],{className:"ant-form-custom",layout:"horizontal"},w.a.createElement(be,N()({label:"\u6807\u8bc6"},o),a("uuId",{rules:[{required:!0,message:"\u53ea\u80fd\u8f93\u6570\u5b57"}]})(w.a.createElement(I["a"],{precision:0,min:0,max:999999999,style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u6570\u636e\u6e90\u6807\u8bc6"}))),w.a.createElement(be,N()({label:"\u6570\u636e\u6e90\u540d\u79f0"},o),a("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]})(w.a.createElement(n["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"}))),w.a.createElement(be,N()({label:"\u5907\u6ce8"},o),a("remark",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]})(w.a.createElement(Ce,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))))},ke=R["a"].create()(we),Te=a("i2Dl"),Se="msg",xe=C["a"].Content,De=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=f()(this,(e=g()(t)).call.apply(e,[this].concat(r))),a.handleOk=function(){a.form.validateFieldsAndScroll(function(e,t){if(!e){var n=a.assemRequestParam(t),r="edit"===a.props.editType?"dataSourceModel/updateDataSource":"dataSourceModel/createDataSource";a.props.dispatch({type:r,payload:{param:n}}).then(function(){c["a"].success("\u4fdd\u5b58\u6210\u529f"),a.props.dispatch({type:"dataSourceModel/queryList"})})}})},a.test=function(){a.form.validateFieldsAndScroll(function(e,t){if(!e){var n=a.assemRequestParam(t);a.props.dispatch({type:"dataSourceModel/test",payload:{param:n}}).then(function(){return c["a"].success("\u6d4b\u8bd5\u901a\u8fc7")})}})},a.assemRequestParam=function(e){var t;if(e.sourceType===Se){t={};var n=e.bpservername,r=e.xpservername,l=e.passcode,o=e.protocal,i=e.sendQName,c=e.receiveQName,u=e.timeout,d=JSON.stringify({bpservername:n,xpservername:r,passcode:l,protocal:o,sendQName:i,receiveQName:c,timeout:u});t.param=d;var p=e.name,m=e.url,h=e.remark;t=s()({name:p,url:m,remark:h},t)}else t=s()({},e);t.port=parseInt(e.port,10),t.dbType=parseInt(e.dbType,10),t.sourceType=e.sourceType;try{t.password=de.encrypt_ECB(e.password,null)}catch(e){console.log(e)}return"edit"===a.props.editType&&(t.uuId=a.props.formData.uuId),t},a.handleCancel=function(){a.props.dispatch({type:"dataSourceModel/stateChange",payload:{showModal:!1}})},a.stateChange=function(e){a.props.dispatch({type:"dataSourceModel/stateChange",payload:e})},a.configDataSource=function(e){a.stateChange({editType:"edit",formData:e,showModal:!0})},a.copyConfigDataSource=function(){var e=a.props.selectedRows[0]||{};a.stateChange({editType:"copy",formData:e,showAddModal:!0})},a.deleteDataSource=function(){a.props.dispatch({type:"dataSourceModel/delete",payload:a.props.selectedRowKeys}).then(function(){})},a.addDataSource=function(){a.stateChange({showAddModal:!0,formData:{},editType:"create"})},a.handleAddOk=function(){a.addForm.validateFields(function(e,t){if(!e){var n=Object.assign(a.props.formData,t);a.props.dispatch({type:"dataSourceModel/insert",payload:{formData:n}}).then(function(){return c["a"].info("\u4fdd\u5b58\u6210\u529f\uff01")})}})},a.handleAddCancel=function(){a.stateChange({showAddModal:!1})},a.selectRowChange=function(e,t){a.stateChange({selectedRowKeys:e,selectedRows:t})},a.getTitle=function(e){var t={copy:"\u590d\u5236",create:"\u65b0\u589e",edit:"\u4fee\u6539"};return"".concat(t[e],"\u6570\u636e\u6e90")},a}return b()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.selectedRowKeys,i=t.selectedRows,s=t.formData,c=t.listData,u=t.editType,d=t.showModal,p=t.searchText,m=t.testLoading,h=t.saveLoading,f=t.loading,y=t.showAddModal,g=this.getTitle(u),v=w.a.createElement(w.a.Fragment,null,w.a.createElement(o["a"],{onClick:this.handleCancel},"\u5173\u95ed"),w.a.createElement(o["a"],{type:"primary",loading:m,onClick:this.test},"\u6d4b\u8bd5"),w.a.createElement(o["a"],{type:"primary",loading:h,onClick:this.handleOk},"\u4fdd\u5b58"));return w.a.createElement("div",{className:"report-view-layer"},w.a.createElement(l["a"],{visible:y,destroyOnClose:!0,keyboard:!1,maskClosable:!1,width:800,okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",onOk:this.handleAddOk,onCancel:this.handleAddCancel,title:g},w.a.createElement(ke,{ref:function(t){return e.addForm=t},formData:s})),w.a.createElement(l["a"],{title:g,destroyOnClose:!0,keyboard:!1,visible:d,maskClosable:!1,width:800,footer:v,onCancel:this.handleCancel,wrapClassName:"vertical-center-modal"},w.a.createElement(C["a"],null,w.a.createElement(xe,{style:{padding:10}},w.a.createElement(r["a"],{spinning:m||h||!1},w.a.createElement(ve,{formData:s,editType:u,ref:function(t){return e.form=t}}))))),w.a.createElement("div",{className:"flex-layout-row list-action"},w.a.createElement(o["a"],{type:"primary",icon:"plus",onClick:this.addDataSource},"\u65b0\u589e"),w.a.createElement(o["a"],{type:"primary",ghost:!0,icon:"copy",onClick:this.copyConfigDataSource,disabled:0===i.length||i.length>1},"\u590d\u5236"),w.a.createElement(Te["a"],{onConfirm:this.deleteDataSource,showPopConfirm:0!==i.length}),w.a.createElement(n["a"].Search,{placeholder:"\u540d\u79f0/\u6807\u8bc6/\u7c7b\u578b/\u5730\u5740/\u5907\u6ce8",enterButton:"\u641c\u7d22",className:"search-button",onPressEnter:function(t){return e.stateChange({searchText:[t.target.value]})},onSearch:function(t){e.stateChange({searchText:[t]})}})),w.a.createElement(O,{selectRowChange:this.selectRowChange,selectedRowKeys:a,configCallback:this.configDataSource,loading:f,searchText:p,dataSource:c}))}}]),t}(E["Component"]),Oe=function(e){var t=e.dataSourceModel,a=e.loading.models.dataSourceModel,n=e.loading.effects["dataSourceModel/test"],r=e.loading.effects["dataSourceModel/createDataSource"]||e.loading.effects["dataSourceModel/updateDataSource"];return s()({loading:a,testLoading:n,saveLoading:r},t)};t["default"]=Object(k["connect"])(Oe)(De)},iGVg:function(e,t,a){"use strict";a.r(t);var n=a("mK77"),r=a.n(n),l=(a("8wx/"),a("oOwq")),o=(a("2Kaa"),a("aLJi")),i=(a("qDyL"),a("nwUc")),s=(a("myUV"),a("swlU")),c=(a("Dd0U"),a("k/Tt")),u=(a("Hvxc"),a("Ft10")),d=(a("/ySr"),a("F0ZO")),p=(a("n3Pa"),a("SHRx")),m=(a("Ko87"),a("YB5O")),h=(a("EdcA"),a("rKq6")),f=a("43Yg"),y=a.n(f),g=a("/tCh"),v=a.n(g),b=a("scpF"),C=a.n(b),E=a("O/V9"),w=a.n(E),k=a("8aBX"),T=a.n(k),S=(a("zHCM"),a("im+1")),x=a("FQm9"),D=a.n(x),O=a("LneV"),I=(a("KCNJ"),a("rgLj")),F=a("Pru3"),P=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=C()(this,(e=w()(t)).call.apply(e,[this].concat(r))),a.setColumns=function(){var e=function(e,t){return Object(F["c"])(t.name,e)||Object(F["c"])(t.dsName,e)||Object(F["c"])(t.uuId,e)||Object(F["c"])(t.category,e)||Object(F["c"])(t.remark,e)},t=a.props.searchText;a.columns=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",align:"left",filteredValue:t,onFilter:e,sorter:function(e,t){return Object(F["a"])(e.name,t.name)},render:function(e){return Object(F["b"])(e,t[0])}},{title:"\u6807\u8bc6",dataIndex:"uuId",key:"uuId",align:"left",sorter:function(e,t){return e.uuId>t.uuId?1:-1},render:function(e){return Object(F["b"])(e,t[0])}},{title:"\u6570\u636e\u6e90",dataIndex:"dsName",key:"dsName",align:"left",sorter:function(e,t){return Object(F["a"])(e.dsName,t.dsName)},render:function(e,a){return Object(F["b"])(e,t[0])}},{title:"\u5206\u7c7b",width:"20%",dataIndex:"category",key:"category",align:"left",sorter:function(e,t){return Object(F["a"])(e.name,t.name)},render:function(e){return Object(F["b"])(e,t[0])}},{title:"\u5907\u6ce8",width:"20%",dataIndex:"remark",key:"remark",align:"left",render:function(e){return Object(F["b"])(e,t[0])}},{title:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",dataIndex:"date",key:"date",sorter:function(e,t){return Object(F["a"])(e.date,t.date)},align:"left"},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,t){return D.a.createElement("button",{onClick:function(){return a.props.configCallback(t)},className:"link-button"},"\u914d\u7f6e")}}]},a}return T()(t,e),v()(t,[{key:"render",value:function(){this.setColumns();var e=this.props,t=e.dataSource,a=e.loading,n={type:this.props.selectType,onChange:this.props.selectRowChange,selectedRowKeys:this.props.selectedRowKeys};return D.a.createElement(I["a"],{rowKey:"uuId",loading:a,rowSelection:n,columns:this.columns,dataSource:t})}}]),t}(D.a.Component);P.defaultProps={selectType:"checkbox",showActionColumn:!0,configCallback:function(){},selectRowChange:function(){},searchText:[""]};var N=P,V=(a("jTJM"),a("KmIe")),q=(a("Nriz"),a("QcoW")),L=a("zAuD"),R=a.n(L),M=(a("mlbU"),a("coPZ")),j=(a("ZS9L"),a("W38+")),A=(a("EH+i"),a("Tfcp")),K=a.n(A),B=(a("2tsh"),function(e){function t(e){var a;y()(this,t),a=C()(this,w()(t).call(this,e)),a.initColumns=function(){a.columns=[{dataIndex:"operation",width:"7%",render:function(e,t,n){return D.a.createElement("span",null,0!==n&&D.a.createElement(c["a"],{className:"procedure-arrow-up",type:"arrow-up",style:{color:"linear-gradient(to bottom, rgb(114, 199, 172), rgb(255, 255, 255), rgb(114, 199, 172))",marginRight:2},onClick:a.handleUp.bind(K()(a),n,t)}),a.state.value.length-1!==n&&D.a.createElement(c["a"],{className:"procedure-arrow-down",type:"arrow-down",style:{color:"style={{ color: linear-gradient(to bottom, rgb(114, 199, 172), rgb(255, 255, 255), rgb(114, 199, 172))"},onClick:a.handleDown.bind(K()(a),n,t)}))}},{title:"\u53c2\u6570\u540d\u79f0",width:"25%",dataIndex:"name",render:function(e,t,n){return D.a.createElement(l["a"],{value:e,maxLength:64,onChange:function(e){return a.handleChange(e.target.value,n,"name")}})}},{title:"\u53c2\u6570\u53d8\u91cf",width:"25%",dataIndex:"value",render:function(e,t,n){return D.a.createElement(l["a"],{value:e,maxLength:64,onChange:function(e){return a.handleChange(e.target.value,n,"value")}})}},{title:D.a.createElement("span",null,D.a.createElement("span",{style:{marginRight:3}},"\u53c2\u6570\u6d4b\u8bd5\u503c"),D.a.createElement(s["a"],{title:"\u5728\u6570\u636e\u96c6\u8bbe\u8ba1\u9636\u6bb5\uff0c\u5982\u679c\u7528\u5230\u81ea\u5b9a\u4e49\u53d8\u91cf\uff0c\u5f62\u5982${report_system_userid}\uff0c\u9700\u8981\u586b\u5145\u6d4b\u8bd5\u503c\u4fdd\u8bc1\u6570\u636e\u96c6\u7684\u6570\u636e\u5217\u5934\u80fd\u6210\u529f\u83b7\u53d6"},D.a.createElement(c["a"],{type:"question-circle-o",style:{color:"blue",fontSize:14,marginTop:5}}))),width:"25%",dataIndex:"testValue",render:function(e,t,n){return D.a.createElement(l["a"],{value:e,maxLength:64,onChange:function(e){return a.handleChange(e.target.value,n,"testValue")}})}},{title:"\u64cd\u4f5c",width:"12%",dataIndex:"address",render:function(e,t,n){return D.a.createElement("span",null,D.a.createElement(c["a"],{type:"plus-circle-o",style:{color:"blue",marginLeft:30},onClick:a.addParam.bind(K()(a),n+1)}),D.a.createElement(c["a"],{type:"minus-circle-o",style:{color:"red",marginLeft:23},onClick:function(){return a.minusParam(n)}}))}}],a.props.needValue||a.columns.splice(2,1)},a.handleChange=function(e,t,n){var r=a.state.value,l=r[t];l[n]=e,a.setState({value:r}),a.triggerChange(r)},a.handleUp=function(e,t,n){n.stopPropagation();var r=a.state.value;r.splice(e,1),r.splice(e-1,0,t),a.setState({value:r}),a.triggerChange(r)},a.handleDown=function(e,t,n){n.stopPropagation();var r=a.state.value;r.splice(e,1),r.splice(e+1,0,t),a.setState({value:r}),a.triggerChange(r)},a.addParam=function(e){var t=a.state.value;0!==e?t.splice(e,0,{}):t.push({}),a.setState({value:t}),a.triggerChange(t)},a.minusParam=function(e){var t=a.state.value;t.splice(e,1),a.setState({value:t}),a.triggerChange(t)},a.triggerChange=function(e){var t=a.props.onChange;t&&t(e)};var n=e.value;return a.state={value:n},a.initColumns(),a}return T()(t,e),v()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if("value"in e){var t=e.value||[];this.setState({value:t})}}},{key:"render",value:function(){var e=this.state.value;return D.a.createElement("div",{className:"procedureParamBox"},0===e.length&&D.a.createElement(c["a"],{type:"plus-circle-o",style:{color:"blue",marginRight:8},onClick:this.addParam.bind(this,0)}),e.length>0&&D.a.createElement(I["a"],{columns:this.columns,size:"samll",rowKey:function(e,t){return t},dataSource:e,pagination:!1}))}}]),t}(x["Component"]));B.defaultProps={size:"default",value:[{}],needValue:!0};var U=B,z=a("TGva"),H=M["a"].Option,W=function(e){function t(e,a){var n;y()(this,t),n=C()(this,w()(t).call(this,e,a)),n.getColumns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.DBtype,t=[{key:"IN",value:""},{key:"OUT",value:""},{key:"INOUT",value:""}],a=e.toLowerCase(),r=z["a"].DBDataTypes[a],o=t.map(function(e){return D.a.createElement(H,{key:e.key,value:e.key},e.key)}),i=Object.keys(r).map(function(e){return D.a.createElement(H,{key:e,title:e,value:r[e]},e)}),s=[{dataIndex:"operation",width:"7%",render:function(e,t,a){return D.a.createElement("span",null,0!==a&&D.a.createElement(c["a"],{className:"procedure-arrow-up",type:"arrow-up",style:{color:"linear-gradient(to bottom, rgb(114, 199, 172), rgb(255, 255, 255), rgb(114, 199, 172))",marginRight:2},onClick:n.handleUp.bind(K()(n),a,t)}),n.state.value.length-1!==a&&D.a.createElement(c["a"],{className:"procedure-arrow-down",type:"arrow-down",style:{color:"style={{ color: linear-gradient(to bottom, rgb(114, 199, 172), rgb(255, 255, 255), rgb(114, 199, 172))"},onClick:n.handleDown.bind(K()(n),a,t)}))}},{title:"\u53c2\u6570\u540d\u79f0",width:"20%",dataIndex:"name",render:function(e,t,a){return D.a.createElement(l["a"],{maxLength:64,value:e,onChange:function(e){return n.handleChange(e.target.value,a,"name")}})}},{title:"\u6267\u884c\u7c7b\u578b",width:"10%",dataIndex:"type",render:function(e,t,a){return D.a.createElement(M["a"],{value:e,onChange:function(e){return n.handleChange(e,a,"type")}},o)}},{title:"\u503c\u7c7b\u578b",width:"15%",dataIndex:"valueType",render:function(e,t,a){return D.a.createElement(M["a"],{value:e,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(e){return n.handleChange(e,a,"valueType")}},i)}},{title:"\u503c",width:"20%",dataIndex:"value",render:function(e,t,a){return D.a.createElement(l["a"],{maxLength:64,value:e,onChange:function(e){return n.handleChange(e.target.value,a,"value")}})}},{title:"\u6d4b\u8bd5\u503c",width:"15%",dataIndex:"testValue",render:function(e,t,a){return D.a.createElement(l["a"],{maxLength:64,value:e,onChange:function(e){return n.handleChange(e.target.value,a,"testValue")}})}},{title:"\u64cd\u4f5c",dataIndex:"operation",width:"10%",render:function(e,t,a){return D.a.createElement("span",null,D.a.createElement(c["a"],{type:"plus-circle-o",style:{color:"blue",marginRight:8},onClick:n.addParam.bind(K()(n),a+1)}),D.a.createElement(c["a"],{type:"minus-circle-o",style:{color:"red"},onClick:function(){return n.minusParam(a)}}))}}];return s},n.handleUp=function(e,t,a){a.stopPropagation();var r=n.state.value;r.splice(e,1),r.splice(e-1,0,t),n.setState({value:r}),n.triggerChange(r)},n.handleDown=function(e,t,a){a.stopPropagation();var r=n.state.value;r.splice(e,1),r.splice(e+1,0,t),n.setState({value:r}),n.triggerChange(r)},n.handleChange=function(e,t,a){var r=n.state.value,l=r[t];l[a]=e,n.setState({value:r}),n.triggerChange(r)},n.addParam=function(e){var t=n.state.value;0!==e?t.splice(e,0,{}):t.push({}),n.setState({value:t}),n.triggerChange(t)},n.minusParam=function(e){var t=n.state.value;t.splice(e,1),n.setState({value:t}),n.triggerChange(t)},n.triggerChange=function(e){var t=n.props.onChange;t&&t(e)};var r=e.value||[];return n.state={value:r,columns:n.getColumns()},n}return T()(t,e),v()(t,[{key:"componentWillReceiveProps",value:function(e){if("value"in e){var t=e.value||[];this.setState({value:t})}"DBtype"in e&&this.setState({columns:this.getColumns(e.DBtype)})}},{key:"render",value:function(){var e=this.state.value;return D.a.createElement("div",{className:"procedureParamBox"},0===e.length&&D.a.createElement(c["a"],{type:"plus-circle-o",style:{color:"blue",marginRight:8},onClick:this.addParam.bind(this,0)}),e.length>0&&D.a.createElement(I["a"],{columns:this.state.columns,size:"samll",dataSource:e,pagination:!1}))}}]),t}(x["Component"]);W.defaultProps={size:"default",value:[],DBtype:"Oracle"};var _=W,J=a("8bSQ"),Q=a("q66v"),Y=a("WlY1"),G=j["a"].Item,Z=M["a"].Option,$=l["a"].TextArea,X="jdbc",ee="msg",te="service",ae="procedure",ne="sql",re="$procedure_returnValue",le=function(e){function t(e,a){var n;return y()(this,t),n=C()(this,w()(t).call(this,e,a)),n.getParam=function(e){var t,a,r=n.state,l=r.sourceType,o=r.saveType;r.requestType;return l===X?o===ne?(t={sqlContent:e.sqlContent,sqlParams:e.sqlParams},a=ne):(t={procedureParams:e.procedureParams,procedureName:e.procedureName,resultParam:e.resultParam||""},a=ae):l===ee?(a=ee,t={funccode:e.funccode,customParam:e.customParam}):(a=te,t={requestType:e.requestType,serviceCode:e.serviceCode,interfaceName:e.interfaceName,customParam:e.customParam}),{type:a,content:t}},n.handleOk=function(e){n.props.form.validateFieldsAndScroll(function(t,a){if(!t){var l=n.getParam(a);l=r()({categoryName:n.props.setType},l);var o={uuId:a.dsUUId,param:JSON.stringify(l),userId:n.userId,categoryName:n.props.setType};e({param:l,testPara:o,formData:a})}})},n.dataSourceChange=function(e,t){var a=n.getDataSourceInfo(e),r=a.sourceType,l=n.state.saveType,o=a.dbTypeString;l=r===X?ne:"",n.setState({dsUUId:e,saveType:l,previewDsUUId:e,sourceType:r,dataBaseType:o},function(){n.state.sourceType===X&&n.props.form.setFieldsValue({type:"sql"})})},n.requestTypeChange=function(e){n.setState({requestType:e})},n.getDataSourceInfo=function(e){var t,a=n.getDataSourceList();return a.forEach(function(a){a.uuId.toString()===e.toString()&&(t=a)}),t||(t={}),t},n.testDataset=function(e){var t,a=n.state,r=a.saveType,l=a.sourceType,o=a.requestType;l===X?t=r===ne?["dsUUId","sqlContent","sqlParams"]:["dsUUId","procedureParams","procedureName","resultParam"]:l===ee?t=["dsUUId","funccode","customParam"]:(t=["dsUUId","requestType","customParam"],t.push("0"===o?"serviceCode":"interfaceName")),n.props.form.validateFields(t,function(t,a){if(!t){var r=n.getParam(a),l={uuId:a.dsUUId,param:JSON.stringify(r),userId:n.userId};e(l)}})},n.saveTypeChange=function(e){n.setState({saveType:e})},n.setFormInfo=function(e){var t=n.state,a=t.saveType,r=t.sourceType,l={remark:e.remark,useCache:e.useCache,name:e.name,dsUUId:e.dsUUId.toString(),category:e.category},o=JSON.parse(e.param),i=o.content||{};r===X?a===ne?(l.type=a,l.sqlContent=i.sqlContent,l.sqlParams=i.sqlParams||[]):(l.type=a,l.procedureParams=i.procedureParams,l.procedureName=i.procedureName,l.resultParam=i.resultParam):r===ee?(l.columns=o.columns,l.funccode=i.funccode,l.customParam=i.customParam||[]):(l.requestType=i.requestType,l.interfaceName=i.interfaceName,l.serviceCode=i.serviceCode,l.customParam=i.customParam||[]),n.editType="edit",n.props.form.setFieldsValue(l)},n.resultParamFocus=function(){var e=n.props.form.getFieldValue("procedureParams"),t=[];e.forEach(function(e){e.type.includes("OUT")&&t.push({name:e.name,value:e.name})}),"oracle"!==n.state.dataBaseType&&t.push({name:"\u8fd4\u56de\u503c",value:re}),n.setState({resultParamOptions:t})},n.dataSourceHandleCancel=function(e){n.setState({showDataSourceModal:!1})},n.getDataSourceList=function(){return n.props.dataSourceList},n.getNameById=function(e){var t=n.props.dataSourceList,a="";return t.forEach(function(t){t.uuId==e&&(a=t.name)}),a},n.handleCacheConfirm=function(e){var t=n.props.detailInfo;Y["a"].clearDatasetCache({uuId:t.uuId||0})},n.handleDataSetModalOk=function(e){if(e&&e.length>0){var t=e[0].uuId;n.props.form.setFieldsValue({dsUUId:t}),n.dataSourceChange(t)}else n.props.form.setFieldsValue({dsUUId:null})},n.state={dataBaseType:"",dataSetUuId:e.selectedId,columns:[],dsUUId:"",sourceType:"",saveType:"",requestType:"",resultParamOptions:[{name:"\u8fd4\u56de\u503c",value:re}],listTitle:"",showCreateView:!1},n.editType="",n}return T()(t,e),v()(t,[{key:"componentDidMount",value:function(){"create"!==this.props.editType&&this.renderDataset(this.props.detailInfo)}},{key:"handleCancel",value:function(e){e.preventDefault(),this.props.handleCancel&&this.props.handleCancel()}},{key:"renderDataset",value:function(e){var t,a=this,n=e,r=JSON.parse(n.param),l=r.type;switch(l){case ne:case ae:t=X;break;case ee:t=ee;break;case te:t=te;break;default:break}var o=this.getDataSourceInfo(n.dsUUId),i=o.dbTypeString,s={sourceType:t,saveType:l,dataBaseType:i,requestType:r.content?r.content.requestType:"",dataSetUuId:n.uuId,columns:r.columns,listTitle:n.name};this.setState(s,function(){a.setFormInfo(n)})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},a=this.getDataSourceList(),n=(a.map(function(e,t){return D.a.createElement(Z,{key:t,value:e.uuId.toString()},e.name)}),this.state.resultParamOptions.map(function(e,t){return D.a.createElement(Z,{key:t,value:e.value},e.name)})),r=Object.keys(z["a"].serviceRequestTypes).map(function(e,t){return D.a.createElement(Z,{key:e},z["a"].serviceRequestTypes[e])}),o="query"===this.props.setType?"\u6570\u636e\u96c6":"\u529f\u80fd\u96c6";return D.a.createElement(j["a"],{layout:"horizontal"},D.a.createElement(G,R()({label:"\u540d\u79f0"},t),e("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165".concat(o,"\u540d\u79f0")},{pattern:/^((?!\.|\$|\/).)*$/,message:"\u4e0d\u80fd\u5305\u542b.\u6216$\u6216/"}]})(D.a.createElement(l["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165".concat(o,"\u540d\u79f0")}))),D.a.createElement(G,R()({label:"\u6570\u636e\u6e90"},t),e("dsUUId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6570\u636e\u6e90"}],onChange:this.dataSourceChange})(D.a.createElement(Q["a"],{title:"\u6570\u636e\u6e90",keyField:"uuId",normalizeValue:this.getNameById,columnType:"dataSource",handleOk:this.handleDataSetModalOk,dataSets:a}))),D.a.createElement(G,R()({label:"\u5206\u7c7b"},t),e("category",{rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}]})(D.a.createElement(J["a"],{categoryList:this.props.categoryList}))),this.state.sourceType===X&&D.a.createElement(G,R()({label:"\u7c7b\u578b"},t),e("type",{onChange:this.saveTypeChange,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7c7b\u578b"}]})(D.a.createElement(M["a"],null,D.a.createElement(Z,{key:0,value:ne},"sql\u8bed\u53e5"),D.a.createElement(Z,{key:0,value:ae},"\u5b58\u50a8\u8fc7\u7a0b")))),this.state.saveType===ne&&D.a.createElement("span",null,D.a.createElement(G,R()({label:"sql"},t),e("sqlContent",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165sql\u8bed\u53e5"}]})(D.a.createElement($,{placeholder:"\u8bf7\u8f93\u5165sql\u8bed\u53e5",type:"rea",style:{height:100}}))),D.a.createElement(G,R()({label:"\u81ea\u5b9a\u4e49\u53c2\u6570"},t),e("sqlParams",{initialValue:[],rules:[{required:!1,message:""}]})(D.a.createElement(U,{needValue:!1})))),this.state.saveType===ae&&D.a.createElement("span",null,D.a.createElement(G,R()({label:"\u5b58\u50a8\u8fc7\u7a0b\u540d\u79f0"},t),e("procedureName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b58\u50a8\u8fc7\u7a0b\u540d\u79f0"}]})(D.a.createElement(l["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u5b58\u50a8\u8fc7\u7a0b\u540d\u79f0"}))),D.a.createElement(G,R()({label:"\u5b58\u50a8\u8fc7\u7a0b\u53c2\u6570"},t),e("procedureParams",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b58\u50a8\u8fc7\u7a0b\u53c2\u6570"}],initialValue:[]})(D.a.createElement(_,null))),D.a.createElement(G,R()({label:"\u51fa\u53c2\u540d\u79f0"},t),e("resultParam",{rules:[{required:"query"===this.props.setType,message:"\u8bf7\u8f93\u5165\u51fa\u53c2\u540d\u79f0"}]})(D.a.createElement(M["a"],{allowClear:!0,notFoundContent:"\u65e0\u7b26\u5408\u6761\u4ef6\u5b58\u50a8\u8fc7\u7a0b\u53c2\u6570",onFocus:this.resultParamFocus},n)))),this.state.sourceType===ee&&D.a.createElement("span",null,D.a.createElement(G,R()({label:"\u529f\u80fd\u53f7"},t),e("funccode",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u529f\u80fd\u53f7"}]})(D.a.createElement(l["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u529f\u80fd\u53f7"}))),D.a.createElement(G,R()({label:"\u81ea\u5b9a\u4e49\u53c2\u6570"},t),e("customParam",{initialValue:[],rules:[{required:!1,message:""}]})(D.a.createElement(U,null)))),this.state.sourceType===te&&D.a.createElement("span",null,D.a.createElement(G,R()({label:"\u8bf7\u6c42\u7c7b\u578b"},t),e("requestType",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bf7\u6c42\u7c7b\u578b"}],onChange:this.requestTypeChange})(D.a.createElement(M["a"],null,r))),"0"===this.state.requestType&&D.a.createElement(G,R()({label:"\u670d\u52a1\u53f7"},t),e("serviceCode",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u670d\u52a1\u53f7"}]})(D.a.createElement(l["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u670d\u52a1\u53f7"}))),"1"===this.state.requestType&&D.a.createElement(G,R()({label:"\u63a5\u53e3\u540d\u79f0"},t),e("interfaceName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d\u79f0"}]})(D.a.createElement(l["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d\u79f0"}))),D.a.createElement(G,R()({label:"\u81ea\u5b9a\u4e49\u53c2\u6570"},t),e("customParam",{initialValue:[],rules:[{required:!1,message:""}]})(D.a.createElement(U,null)))),"query"===this.props.setType&&D.a.createElement(D.a.Fragment,null,D.a.createElement(G,R()({label:"\u5f00\u542f\u7f13\u5b58"},t),e("useCache",{valuePropName:"checked",rules:[{required:!1,message:"\u5f00\u542f\u7f13\u5b58"}]})(D.a.createElement(q["a"],{checkedChildren:"\u662f",unCheckedChildren:"\u5426"}))),D.a.createElement(V["a"],{title:"\u7f13\u5b58\u5c06\u88ab\u6e05\u9664\uff0c\u662f\u5426\u7ee7\u7eed\u64cd\u4f5c\uff1f",style:{marginLeft:30,cursor:"pointer"},onConfirm:this.handleCacheConfirm.bind(this)},D.a.createElement(m["a"],{size:"small",style:{marginLeft:30,position:"relative",left:"183px",top:"-40px"},type:"primary"},D.a.createElement(c["a"],{type:"stop"}),"\u6e05\u7406\u7f13\u5b58"))),D.a.createElement(G,R()({label:"\u5907\u6ce8"},t),e("remark",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]})(D.a.createElement(l["a"].TextArea,{maxLength:64,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))))}}]),t}(D.a.Component);le.defaultProps={setType:"query",selectedId:NaN,categoryList:[],dataSourceList:[]};var oe=j["a"].create()(le),ie=(a("SazW"),a("Q2Fu")),se=(a("9Y/d"),a("bgyY")),ce=(a("ORyx"),se["a"].TreeNode,S["a"].Sider,S["a"].Content),ue=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=C()(this,(e=w()(t)).call.apply(e,[this].concat(r))),a.state={expandedKeys:["0-0","0-0-0","0-0-0-0"],treeData:[{title:"\u7ef4\u5ea6\u5217",key:"dimension",children:[{title:"a",key:"demension-a"},{title:"b",key:"demension-b"},{title:"c",key:"demension-c"},{title:"d",key:"demension-d"}]},{title:"\u6307\u6807\u5217",key:"indicator",children:[]},{title:"\u53ef\u9009\u8868\u8fbe\u5f0f",key:"expression",children:[]},{title:"\u53ef\u9009\u8fc7\u6ee4",key:"filter",children:[]}]},a.onDragStart=function(e){},a.onDragEnter=function(){},a.onDrop=function(e){},a.treeRef=function(e){a.tree=e},a.onChange=function(e,t,n){var r=a.props.dataSource,l=n.target.value,o={name:e,alias:l};r[t]=o,a.props.aliasChange(r)},a}return T()(t,e),v()(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=function(e,t){return D.a.createElement("span",{title:e+(t?" I "+t:""),style:{backgroundColor:"#87d068",display:"inline-block",height:"100%",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"top",border:"none",maxWidth:"200px",paddingLeft:"7px",paddingRight:"7px"}},e+(t?" I "+t:""))},a=function(t,a,n){return D.a.createElement("div",{style:{padding:"0",verticalAlign:"top"}},D.a.createElement("span",{style:{backgroundColor:"#87d068",display:"inline-block",height:"100%",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"top",border:"none",maxWidth:"200px",paddingLeft:"7px",paddingRight:"7px"}},t),D.a.createElement(l["a"],{defaultValue:a,onChange:function(a){e.onChange(t,n,a)},style:{width:"100px",height:"20px",border:"1px solid #40a9ff"}}))},n=this.props.dataSource,r=this.props.setAlias,o=n.map(function(n,l){return D.a.createElement(ie["a"],{draggable:!0,style:{padding:"0"},onDragStart:function(){return e.onDragStart(n)},key:l},r?a(n.name,n.alias,l):t(n.name,n.alias))});return D.a.createElement(S["a"],null,D.a.createElement(ce,{style:{padding:10,display:"flex",flexWrap:"wrap",alignContent:"flex-start"}},o))}}]),t}(x["Component"]);ue.defaultProps={dataSource:[]};var de=ue,pe=(a("PuNp"),a("sVKK")),me=j["a"].Item,he=l["a"].TextArea,fe=function(e){var t=e.form,a=t.getFieldDecorator,n=t.setFieldsValue,r=e.setType,o=e.detailInfo,i=void 0===o?{}:o;Object(x["useEffect"])(function(){n(i)},[i]);var s={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},c="query"===r?"\u6570\u636e\u96c6":"\u529f\u80fd\u96c6";return D.a.createElement(j["a"],{layout:"horizontal"},D.a.createElement(me,R()({label:"\u6807\u8bc6"},s),a("uuId",{rules:[{required:!0,message:"\u53ea\u80fd\u8f93\u6570\u5b57"}]})(D.a.createElement(pe["a"],{precision:0,min:0,max:999999999,style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165".concat(c,"\u6807\u8bc6")}))),D.a.createElement(me,R()({label:"\u540d\u79f0"},s),a("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165".concat(c,"\u540d\u79f0")},{pattern:/^((?!\.|\$|\/|\(|\)).)*$/,message:"\u4e0d\u80fd\u5305\u542b.\u6216$\u6216/"}]})(D.a.createElement(l["a"],{maxLength:64,placeholder:"\u8bf7\u8f93\u5165".concat(c,"\u540d\u79f0")}))),D.a.createElement(me,R()({label:"\u5907\u6ce8"},s),a("remark",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]})(D.a.createElement(he,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))))},ye=j["a"].create()(fe),ge=a("i2Dl"),ve=S["a"].Content,be=function(){return D.a.createElement("svg",{class:"icon",width:"1em",height:"1em",viewBox:"64 64 896 896",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},D.a.createElement("path",{fill:"#1afa29",d:"M107.2 477.5c43.4 1.5 80.9 17.6 122.2 44 34.6 22.2 84.7 59.9 133.9 121 15.7-21.1 38-49.9 66.2-82.9C485.3 494.1 515.8 448.5 675 325c83.6-64.8 173.5-121.6 269.3-169.9 14.9-7.5 33-1.5 40.5 13.3 6.9 13.7 2.4 30.1-9.9 38.5-168.7 115.3-315.4 263.4-429.1 439.7-60.9 94.5-108.2 191.2-108.2 191.2-33.8 48.2-106.7 45.4-136.4-6.5-60.6-107.1-143.4-196.4-243.6-266.1-22.9-16-28.6-47.5-12.6-70.4 13-18.7 44.7-17.9 62.2-17.3z"}))},Ce=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=C()(this,(e=w()(t)).call.apply(e,[this].concat(r))),a.state={setAlias:!1},a.aliasChangeTrue=!1,a.stateChange=function(e){a.props.dispatch({type:"dataSetModel/stateChange",payload:e})},a.handleCancel=function(){a.setState({setAlias:!1}),a.stateChange({showModal:!1}),a.props.dispatch({type:"dataSetModel/queryList"})},a.handleOk=function(){var e=[];e=a.state.setAlias?a.columnsDetail:a.props.columns&&a.props.columns.length>0?a.props.columns:[],a.form.handleOk(function(t){var n=t.param,r=t.testPara,l=t.formData;a.props.dispatch({type:"dataSetModel/update",payload:{param:n,testPara:r,formData:l,columnsDetail:e},callback:function(){a.setState({setAlias:!1}),h["a"].success("\u4fdd\u5b58\u6210\u529f")}})})},a.test=function(){var e=[];e=a.state.setAlias?a.columnsDetail:a.props.columns&&a.props.columns.length>0?a.props.columns:[],a.form.testDataset(function(t){a.props.dispatch({type:"dataSetModel/test",payload:{para:t,columnsDetail:e},callback:function(){return h["a"].success("\u6d4b\u8bd5\u901a\u8fc7")}})})},a.deleteDataSet=function(){a.props.dispatch({type:"dataSetModel/delete",payload:a.props.selectedRowKeys}).then(function(e){h["a"].success("\u5220\u9664\u6210\u529f"),a.props.dispatch({type:"dataSetModel/queryList"})}).catch(function(e){h["a"].error("\u5220\u9664\u5931\u8d25")})},a.selectRowChange=function(e,t){a.stateChange({selectedRowKeys:e,selectedRows:t})},a.crateDataSet=function(){a.stateChange({showAddModal:!0,editType:"create",detailInfo:{}})},a.handleSettingClick=function(){var e=a.state.setAlias;a.setState({setAlias:!e}),e||a.aliasChangeTrue||(a.columnsDetail=a.props.columns&&a.props.columns.length>0?a.props.columns:[])},a.configDataDataSource=function(e){var t=JSON.parse(e.param)||{},n=[];if(t.columns){var r=[];t.columns&&t.columns.length>0&&(r=t.columns.map(function(e){return{name:e,alias:""}})),n=r}else t.columnsDetail&&(n=t.columnsDetail);a.stateChange({showModal:!0,editType:"edit",detailInfo:e,columns:n||[]}),a.props.dispatch({type:"dataSetModel/queryDatasourceList"}),a.props.dispatch({type:"dataSetModel/queryCategoryList"})},a.copyConfigDataDataSource=function(){var e=a.props.selectedRows[0]||{};a.stateChange({showAddModal:!0,editType:"copy",detailInfo:e})},a.handleAddOk=function(){a.addForm.validateFields(function(e,t){if(!e){var n=a.props,r=n.detailInfo,l=n.setType,o=Object.assign(r,t);o.categoryName="query"===l?"query":"operate",a.props.dispatch({type:"dataSetModel/insert",payload:{formData:o}}).then(function(){return h["a"].info("\u4fdd\u5b58\u6210\u529f\uff01")})}})},a.handleAddCancel=function(){a.stateChange({showAddModal:!1}),a.props.dispatch({type:"dataSetModel/queryList"})},a.getModalTitle=function(e,t){var a={edit:"\u7f16\u8f91",create:"\u65b0\u589e",copy:"\u590d\u5236"};return"".concat(a[e]).concat(t)},a.aliasChange=function(e){a.aliasChangeTrue=!0,a.columnsDetail=e},a}return T()(t,e),v()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.selectedRowKeys,n=t.selectedRows,r=t.listData,h=t.dataSourceMap,f=t.loading,y=t.showModal,g=t.showAddModal,v=t.testLoading,b=t.saveLoading,C=t.editType,E=t.detailInfo,w=t.dataSourceList,k=t.columns,T=void 0===k?[]:k,x=t.categoryList,O=t.setType,I=t.searchText,F="query"===O?"\u6570\u636e\u96c6":"\u529f\u80fd\u96c6",P=this.getModalTitle(C,F),V=D.a.createElement(D.a.Fragment,null,D.a.createElement(m["a"],{onClick:this.handleCancel},"\u5173\u95ed"),D.a.createElement(m["a"],{type:"primary",loading:v,onClick:this.test},"\u6d4b\u8bd5"),D.a.createElement(m["a"],{type:"primary",loading:b,onClick:this.handleOk},"\u4fdd\u5b58"));return D.a.createElement("div",{className:"report-view-layer"},D.a.createElement(p["a"],{visible:g,destroyOnClose:!0,keyboard:!1,maskClosable:!1,width:800,okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",onOk:this.handleAddOk,onCancel:this.handleAddCancel,title:P},D.a.createElement(ye,{ref:function(t){return e.addForm=t},setType:O,detailInfo:E})),D.a.createElement(p["a"],{title:P,destroyOnClose:!0,keyboard:!1,visible:y,maskClosable:!1,width:"query"===O?1200:800,onCancel:this.handleCancel,footer:V,wrapClassName:"vertical-center-modal"},D.a.createElement(o["a"],{spinning:f},D.a.createElement(S["a"],null,D.a.createElement(ve,{style:{padding:10}},"query"===O&&D.a.createElement(i["a"],{gutter:16},D.a.createElement(u["a"],{span:16},D.a.createElement(d["a"],{title:"\u914d\u7f6e".concat(F)},D.a.createElement(oe,{wrappedComponentRef:function(t){return e.form=t},detailInfo:E,categoryList:x,dataSourceList:w,editType:this.props.editType,setType:O}))),D.a.createElement(u["a"],{span:8},D.a.createElement(d["a"],{title:"\u6570\u636e\u5217\u9884\u89c8",style:{postion:"relative"}},D.a.createElement("div",{style:{position:"absolute",top:"13px",right:"5%",cursor:"pointer"}},D.a.createElement(s["a"],{title:this.state.setAlias?"\u4fdd\u5b58\u5907\u6ce8\u540d":"\u5907\u6ce8\u540d\u8bbe\u7f6e"},!this.state.setAlias&&D.a.createElement(c["a"],{type:"setting",style:{fontSize:"25px"},onClick:this.handleSettingClick}),this.state.setAlias&&D.a.createElement(c["a"],{component:be,onClick:this.handleSettingClick,style:{fontSize:"20px"}}))),D.a.createElement(de,{dataSource:T,setAlias:this.state.setAlias,aliasChange:this.aliasChange})))),"query"!==O&&D.a.createElement(oe,{wrappedComponentRef:function(t){return e.form=t},detailInfo:E,categoryList:x,dataSourceList:w,editType:this.props.editType,setType:O}))))),D.a.createElement("div",{className:"flex-layout-row list-action"},D.a.createElement(m["a"],{type:"primary",icon:"plus",onClick:this.crateDataSet},"\u65b0\u589e"),D.a.createElement(m["a"],{type:"primary",ghost:!0,icon:"copy",onClick:this.copyConfigDataDataSource,disabled:0===n.length||n.length>1},"\u590d\u5236"),D.a.createElement(ge["a"],{showPopConfirm:0!==n.length,onConfirm:this.deleteDataSet}),D.a.createElement(l["a"].Search,{placeholder:"\u540d\u79f0/\u6807\u8bc6/\u6570\u636e\u6e90/\u5206\u7c7b/\u5907\u6ce8",enterButton:"\u641c\u7d22",className:"search-button",onPressEnter:function(t){return e.stateChange({searchText:[t.target.value]})},onSearch:function(t){e.stateChange({searchText:[t]})}})),D.a.createElement(N,{selectRowChange:this.selectRowChange,selectedRowKeys:a,configCallback:this.configDataDataSource,loading:f,searchText:I,dataSource:r,dataSourceMap:h}))}}]),t}(x["Component"]),Ee=function(e){var t=e.dataSetModel,a=e.loading.models.dataSetModel;return r()({loading:a},t)};t["default"]=Object(O["connect"])(Ee)(Ce)},j4Te:function(e,t,a){e.exports={"fieldList-expandRow":"fieldList-expandRow","ant-form-item-control-wrapper":"ant-form-item-control-wrapper","ant-form-item-label":"ant-form-item-label","ant-form-item":"ant-form-item"}}}]);