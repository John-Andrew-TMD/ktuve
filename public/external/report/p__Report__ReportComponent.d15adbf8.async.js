(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{Dox2:function(e,t,a){"use strict";a.r(t);a("L7jA");var n=a("KVln"),i=a("43Yg"),r=a.n(i),s=a("/tCh"),o=a.n(s),u=a("scpF"),l=a.n(u),c=a("O/V9"),m=a.n(c),p=a("Tfcp"),d=a.n(p),h=a("8aBX"),v=a.n(h),f=a("FQm9"),g=a.n(f),b=a("oWQB"),w=a.n(b),S=a("t3Un"),I=a("Juvv"),N=a("wOmh"),y=a("rywk"),C=a("BhiI"),O=a("YcGi"),k=(a("bZwN"),function(e){function t(e,a){var n;r()(this,t),n=l()(this,m()(t).call(this,e,a)),n.preview=function(e){Object(S["a"])("/database/preview",e).then(function(e){Object(O["b"])({data:e.areaDatas[0],previewSetting:{},pageIndex:0,pageSize:20,styles:e.styles}).then(function(e){n.setState({dataSource:e})})})},n.checkPermission=function(){var e={userId:localStorage.getItem("userId"),uuId:n.uuId};Object(S["a"])("database/previewQueryOption",e).then(function(){n.setState({permission:!0}),n.preview(n.param),C["a"].queryChart({uuId:n.uuId}).then(function(e){var t=e[0];n.setState({reportName:t.name}),n.setState({templateInfo:t})})}).catch(function(e){var t=e.code;403===t&&n.setState({permission:!1,visible403:!0}),500===t&&n.setState({permission:!1,visible500:!0})})},n.handFilter=function(e,t,a,i){var r=d()(n),s=i.dataColumnPos?{name:i.dataColumnPos,direction:a}:{};i.dataColumnPos&&(sessionStorage.removeItem("template_filter"),sessionStorage.setItem("template_filter",JSON.stringify(s)),n.setState({spinning:!0},function(){var e=Object.assign({},r.param,{datasetColumn:s});n.preview(e)}))},n.handleCancel=function(){n.setState({permission:!1,visible500:!0})};var i=w.a.parse(n.props.location.search);return n.param={areaParam:[{id:"area_".concat(Number(i.id)),paged:!0,pageIndex:1,pageSize:Number(i.pageSize)||10}],uuId:Number(i.id),queryValues:E(i)},n.uuId=i.id,n.height=Number(i.height),n.width=Number(i.width),n.showTitle="true"===i.showTitle,n.state={permission:!1,visible403:!1,visible500:!1,dataSource:{},reportName:"",templateInfo:{}},n}return v()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.checkPermission()}},{key:"render",value:function(){var e=this.state,t=e.permission,a=e.visible403,i=e.visible500;return g.a.createElement("div",{className:"reportPage"},t&&g.a.createElement(g.a.Fragment,null,this.showTitle&&g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"report-name"},this.state.reportName),g.a.createElement(n["a"],{className:"report-divider"})),g.a.createElement(I["a"],{dataSource:this.state.dataSource,reportHeight:this.height,handFilter:this.handFilter,reportWidth:this.width,fromReportComponent:!0})),a&&g.a.createElement(N["a"],null),i&&g.a.createElement(y["a"],null))}}]),t}(f["Component"]));function E(e){for(var t=[],a=0,n=Object.keys(e);a<n.length;a++){var i=n[a],r=i.split(".");r.length>1&&(t[r[1]]||(t[r[1]]={}),t[r[1]][r[2]]=e[i])}return t}t["default"]=k}}]);